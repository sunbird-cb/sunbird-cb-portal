<mat-card class="no-shadow flex flex-1">
  <mat-card-content>
    <div #images>
      <img [src]="url | pipeSafeSanitizer: 'url'" alt="Certificate" role="image" class="certificate-banner-image" />
    </div>
    <!-- <canvas id="certCanvas"  class="certificate-banner-image"></canvas> -->


  </mat-card-content>

  <div class="flex flex-col info-box">
    <mat-card-title>
      <span i18n>About the course</span>
    </mat-card-title>

    <div>
      <div *ngIf="this.data.value.content?.appIcon" class="float-left">
        <img [src]="this.data.value.content?.posterImage | pipePublicURL" class="app-icon course-image"
          [alt]="this.data.value.content.name || iGOT" />
      </div>
      <div *ngIf="!this.data.value.content?.appIcon" class="float-left">
        <img src="/assets/instances/eagle/app_logos/default.png" class="app-icon course-image"
          [alt]="this.data.value.content.name || iGOT" />
      </div>
    </div>
    <div class="subheading pb-1 cursor-pointer">
      {{ this.data.value.content?.name }}
    </div>
    <div>
      {{ this.data.value.content?.description }}
    </div>
    
    <a (click)="navigate(this.data.value.collectionId)" *ngIf="this.courseData?.status !== 'Retired'"  [mat-dialog-close]="true" class="link-course cursor-pointer">
      View Course
    </a>
    <div *ngIf="this.courseData?.status === 'Retired'" class="retired-box margin-top-s">
      <p class="link-course retired-cour">This course has been retired.</p>
      <mat-icon class="mat-icon info-icon margin-left-xs" matTooltipPosition="left" matTooltip="We periodically retire courses to keep the content relevant and in line 
      with competency standards. The retired courses will no longer be accessible on the platform.">help</mat-icon>
    </div>
    <div class="flex flex-row gap-3 mtop">
      <!-- <a
        mat-button
        (click)="dwonloadCert()"
        class="ws-mat-accent-border-active mat-accent px-3"
      >
        <mat-icon
          class="mat-icon material-icons-outlined download_icon margin-right-xs"
          >cloud_download</mat-icon
        >
        Download
      </a> -->
      <a mat-button [matMenuTriggerFor]="menu" class="ws-mat-accent-border-active mat-accent" (click)="raiseIntreactTelemetry('download')">
        <mat-icon class="mat-icon material-icons-outlined download_icon margin-right-xs">cloud_download</mat-icon>
        Download
      </a>
      <a mat-button (click)="shareCert()" class="ws-mat-accent-border-active mat-accent">
        <mat-icon class="mat-icon material-icons-outlined download_icon margin-right-xs">share</mat-icon>
        Share
      </a>
    </div>
  </div>
  
  <button mat-icon-button class="close-button" [mat-dialog-close]="true">
    <mat-icon class="close-icon" color="warn">close</mat-icon>
  </button>
</mat-card>

<mat-menu #menu="matMenu">
  <button mat-menu-item (click)='downloadCertPdf()'>
    <mat-icon>picture_as_pdf</mat-icon>
    <span>PDF</span>
  </button>
  <button mat-menu-item (click)='downloadCertPng()'>
    <mat-icon>photo</mat-icon>
    <span>PNG</span>
  </button>
  <button mat-menu-item (click)='downloadCert()'>
    <mat-icon>photo_size_select_actual</mat-icon>
    <span>SVG</span>
  </button>
</mat-menu>