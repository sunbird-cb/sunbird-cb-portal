<!--  -->
<div class="widget-card-content-new">
  <ng-container *ngIf="widgetData && (((widgetData?.deletedMode || 'none') === 'hide' && !!!isLiveOrMarkForDeletion)
  ? false
  : !((widgetData?.intranetMode || 'none') === 'hide' && !!showIntranetContent))"
    [ngSwitch]="( (widgetData && widgetData?.cardSubType) || 'cardStandard')">
    <ng-container *ngSwitchCase="'minimal'" [ngTemplateOutlet]="cardMinimal"></ng-container>
    <ng-container *ngSwitchCase="'minimalV2'" [ngTemplateOutlet]="cardMinimalV2"></ng-container>
    <ng-container *ngSwitchCase="'space-saving'" [ngTemplateOutlet]="cardSpaceSaving"></ng-container>
    <ng-container *ngSwitchCase="'basic-info'" [ngTemplateOutlet]="cardBasicInformation"></ng-container>
    <ng-container *ngSwitchCase="'card-description-back'" [ngTemplateOutlet]="cardDescriptionBack"></ng-container>
    <ng-container *ngSwitchCase="'basic-details'" [ngTemplateOutlet]="cardBasicDetails"></ng-container>
    <ng-container *ngSwitchCase="'card-discussion'" [ngTemplateOutlet]="cardDiscussion"></ng-container>
    <ng-container *ngSwitchCase="'card-wide'" [ngTemplateOutlet]="cardWide"></ng-container>
    <ng-container *ngSwitchCase="'card-wide-v2'" [ngTemplateOutlet]="cardWideV2"></ng-container>
    <ng-container *ngSwitchCase="'card-wide-v2-skelton'" [ngTemplateOutlet]="cardWideV2Skelton"></ng-container>
    <ng-container *ngSwitchDefault [ngTemplateOutlet]="cardStandard"></ng-container>
    <ng-container *ngSwitchCase="'cardCurated'" [ngTemplateOutlet]="cardCurated"></ng-container>
    <ng-container *ngSwitchCase="'card-portrait-skeleton'" [ngTemplateOutlet]="cardPortraitSkeleton"></ng-container>
    <ng-container *ngSwitchCase="'card-portrait'" [ngTemplateOutlet]="cardPortrait"></ng-container>
    <ng-container *ngSwitchCase="'card-portrait-click-skeleton'" [ngTemplateOutlet]="cardPortraitClickSkeleton"></ng-container>
    <ng-container *ngSwitchCase="'card-portrait-click'" [ngTemplateOutlet]="cardPortraitClick"></ng-container>
    <ng-container *ngSwitchCase="'card-standard-skeleton'" [ngTemplateOutlet]="cardStandardSkeleton"></ng-container>
    <!-- cardPortraitSkeleton -->
    <ng-container *ngSwitchCase="'cardCuratedCollection'" [ngTemplateOutlet]="cardCuratedCollection"></ng-container>
  </ng-container>
</div>

<ng-template #cardMinimal>
  <div [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-minimal-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="card-link" role="link"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img [src]="widgetData.content.posterImage | pipePublicURL" class="card-thumbnail ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
      </a>
      <div class="card-overlay">
        <h3 *ngIf="widgetData.content.name" class="text-truncate card-title">
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link">
            {{ widgetData.content.name }}
          </a>

        </h3>
        <div class="flex justify-between items-center">
          <div>
            <ws-widget-display-content-type i18n-title title="Content Type"
              *ngIf="widgetData.content?.displayContentType" class="mr-4 font-normal"
              [displayContentType]="widgetData.content?.displayContentType">
            </ws-widget-display-content-type>
            <span *ngIf="widgetData.content.duration" i18n-title title="Duration">
              {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </span>
          </div>
          <button mat-icon-button i18n-aria-label aria-label="action items" [matMenuTriggerFor]="cardMenu">
            <mat-icon>more_vertical</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #cardMinimalV2>
  <div [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-minimal-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <a (click)="raiseTelemetry(); $event.stopPropagation()"
      [routerLink]="widgetData.linkUrl ? widgetData.linkUrl : (widgetData.content | pipeContentRoute).url"
      [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="card-link" role="link"
      aria-label="Content" i18n-aria-label="Content | Click to view">
        <ng-container *ngIf="widgetData?.linkUrl">
              <ng-container *ngIf="widgetData.content.posterImage">
                <img [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy"
                class="card-thumbnail ws-mat-primary-lite-background"
                [alt]="widgetData.content.name" />
              </ng-container>
              <ng-container *ngIf="!widgetData.content.posterImage">
                <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
                  <img [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy"
                  class="card-thumbnail ws-mat-primary-lite-background"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
                  [alt]="widgetData.content.name" />
                </ng-container>
                <ng-template #defaultImg>
                  <img [src]="defaultThumbnail" loading="lazy"
                  class="card-thumbnail ws-mat-primary-lite-background"
                  [alt]="widgetData.content.name" />
                </ng-template>
              </ng-container>
        </ng-container>
        <ng-container *ngIf="!widgetData?.linkUrl">
            <img [src]="widgetData.content.posterImage | pipePublicURL" class="card-thumbnail ws-mat-primary-lite-background"
              [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
              [title]="widgetData.content.name" />
        </ng-container>
        <div class="card-overlay">
            <h3 *ngIf="widgetData.content.name" class="card-title mat-subheading-1">
              {{ widgetData.content.name }}
          </h3>
            <div class="mat-body-2 description-text mt-2 ws-mat-primary-text text-truncate">
            {{ widgetData.content.description | pipeHtmlTagRemoval }}
          </div>
        </div>
      </a>
    </div>
  </div>
</ng-template>

<ng-template #cardCuratedCollection>
  <div [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-minimal-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <a (click)="raiseTelemetry(); $event.stopPropagation(); redirectToUrl()"
      [routerLink]="widgetData.linkUrl ? widgetData.linkUrl : (widgetData.content | pipeContentRoute).url"
      [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="card-link" role="link"
      aria-label="Content" i18n-aria-label="Content | Click to view">
        <ng-container *ngIf="widgetData?.linkUrl">
              <ng-container *ngIf="widgetData.content.posterImage">
                <img [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy"
                class="card-thumbnail ws-mat-primary-lite-background"
                [alt]="widgetData.content.name" />
              </ng-container>
              <ng-container *ngIf="!widgetData.content.posterImage">
                <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
                  <img [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy"
                  class="card-thumbnail ws-mat-primary-lite-background"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
                  [alt]="widgetData.content.name" />
                </ng-container>
                <ng-template #defaultImg>
                  <img [src]="defaultThumbnail" loading="lazy"
                  class="card-thumbnail ws-mat-primary-lite-background"
                  [alt]="widgetData.content.name" />
                </ng-template>
              </ng-container>
        </ng-container>
        <ng-container *ngIf="!widgetData?.linkUrl">
            <img [src]="widgetData.content.posterImage | pipePublicURL" class="card-thumbnail ws-mat-primary-lite-background"
              [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
              [title]="widgetData.content.name" />
        </ng-container>
        <div class="card-overlay">
            <h3 *ngIf="widgetData.content.name" class="card-title mat-subheading-1">
              {{ widgetData.content.name }}
          </h3>
            <div class="mat-body-2 description-text mt-2 ws-mat-primary-text text-truncate">
            {{ widgetData.content.description | pipeHtmlTagRemoval }}
          </div>
        </div>
      </a>
    </div>
  </div>
</ng-template>

<mat-menu #cardMenu="matMenu">
  <ng-template matMenuContent>
    <div mat-menu-item>
      <a mat-menu-item (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="flex flex-middle">
        <mat-icon>toc</mat-icon>
        <h3 class="margin-remove" i18n>
          <!-- View details -->
          {{ 'cardcontentv2.viewDetails' | translate }}
        </h3>
      </a>

      <ws-widget-btn-content-download [widgetData]="
          widgetData.content
            | pipePartialContent
              : [
                  'identifier',
                  'contentType',
                  'resourceType',
                  'mimeType',
                  'downloadUrl',
                  'isExternal',
                  'artifactUrl'
                ]
        "></ws-widget-btn-content-download>
      <ws-widget-btn-content-mail-me [widgetData]="widgetData.content"></ws-widget-btn-content-mail-me>
      <ws-widget-btn-channel-analytics [widgetData]="widgetData.content"></ws-widget-btn-channel-analytics>
      <ws-widget-btn-kb [contentId]="widgetData?.content?.identifier" [forPreview]="false"
        [contentName]="widgetData?.content?.name" [contentType]="widgetData?.content?.contentType">
      </ws-widget-btn-kb>
      <ws-widget-btn-kb-analytics [widgetData]="
          widgetData.content
            | pipePartialContent
              : [
                  'identifier',
                  'contentType',
                  'resourceType',
                  'mimeType',
                  'downloadUrl',
                  'isExternal',
                  'artifactUrl'
                ]
        "></ws-widget-btn-kb-analytics>
    </div>
  </ng-template>
</mat-menu>

<ng-template #cardSpaceSaving>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-space-saving-container mr-6"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="rounded-t"
          aria-label="Content" i18n-aria-label="Content | Click to view">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
            [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
            [title]="widgetData.content.name" />
        </a>
        <mat-card-content>
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
            i18n-aria-label>
            <div class="card-header-meta">
              <ws-widget-display-content-type i18n-title title="Content Type"
                *ngIf="widgetData.content?.displayContentType" class="ws-mat-primary-text font-normal"
                [displayContentType]="widgetData.content?.displayContentType">
              </ws-widget-display-content-type>
              <span *ngIf="widgetData.content.duration" class="text-gray-600" i18n-title title="Duration">
                &nbsp;&nbsp;|&nbsp;&nbsp;{{
                widgetData.content.duration | pipeDurationTransform: 'hms'
                }}
              </span>
            </div>
            <div class="ws-mat-primary-text mat-title text-truncate title-text" title="Title" i18n-title>
              {{ widgetData.content.name }}
            </div>
          </a>
          <div class="mt-4 flex justify-between items-center flip-actions">
            <div>
              <div *ngIf="widgetData.content.sourceName" class="ws-mat-primary-text mat-subheading-1 source-name"
                i18n-title title="Source">
                {{ widgetData.content.sourceName }}
              </div>
              <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level" class="text-gray-600">
                {{ widgetData.content.complexityLevel }}
              </div>
            </div>
            <div class="flex">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" (click)="isCardFlipped = !isCardFlipped" mat-icon-button i18n-aria-label
                aria-label="action items">
                <mat-icon>flip_to_back</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <mat-card-content>
          <div class="card-header-meta">
            <ws-widget-display-content-type i18n-title title="Content Type"
              *ngIf="widgetData.content?.displayContentType" class="ws-mat-primary-text font-normal"
              [displayContentType]="widgetData.content?.displayContentType">
            </ws-widget-display-content-type>
            <span *ngIf="widgetData.content.duration" class="text-gray-600" i18n-title title="Duration">
              &nbsp;&nbsp;|&nbsp;&nbsp;{{
              widgetData.content.duration | pipeDurationTransform: 'hms'
              }}
            </span>
          </div>
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" aria-label="Content"
            i18n-aria-label="Content | Click to view" class="ws-mat-primary-text mat-title text-truncate title-text">
            {{ widgetData.content.name }}
          </a>
          <div *ngIf="widgetData?.content?.description" class="mt-4 flip-desc-text ws-mat-text-block-fade-gradient">
            {{ widgetData?.content?.description }}
          </div>
          <div class="mt-4 flex justify-between items-center flip-actions">
            <div>
              <div *ngIf="widgetData.content.sourceName" class="ws-mat-primary-text mat-subheading-1 source-name"
                i18n-title title="Source">
                {{ widgetData.content.sourceName }}
              </div>
              <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level" class="text-gray-600">
                {{ widgetData.content.complexityLevel }}
              </div>
            </div>
            <div class="flex">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" (click)="isCardFlipped = !isCardFlipped" mat-icon-button aria-label="action items">
                <mat-icon>flip_to_front</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
    </div>
  </mat-card>
</ng-template>

<ng-template #rating>
  <div class="flex items-center mr-2">
    <mat-icon class="mr-1" *ngIf="widgetData?.content?.averageRating == 5" color="accent">star</mat-icon>
    <mat-icon class="mr-1" *ngIf="widgetData?.content?.averageRating && widgetData.content.averageRating != 5"
      color="accent">star_half</mat-icon>
    <mat-icon class="mr-1" *ngIf="!widgetData?.content?.averageRating">star_border</mat-icon>
    <span>{{ widgetData?.content?.averageRating | number: '1.1-1' }}</span>
  </div>
</ng-template>

<ng-template #cardBasicInformation>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-basic-infomartion-container mr-6"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="rounded-t"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
      </a>

      <mat-card-content class="m-small">
        <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
          i18n-aria-label>
          <div class="ws-mat-primary-background text-truncate px-4 py-2 -mx-4 text-white">
            <span *ngIf="widgetData.content?.complexityLevel">{{
              widgetData.content?.complexityLevel
              }}</span>

            <span i18n *ngIf="widgetData.content?.subTitle">
              |
            </span>
            <span matTooltipPosition="right" [matTooltip]="widgetData.content?.subTitle">
              {{ widgetData.content?.subTitle }}
            </span>
          </div>
          <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div>
          <div class="h-5">
            <div *ngIf="showContentTag && widgetData.contentTags && widgetData.contentTags.tag" i18n
              class="mode-tag px-2 ws-mat-primary-background">
              {{ widgetData.contentTags.tag }}
            </div>
          </div>
        </a>
      </mat-card-content>
      <div class="flex justify-between items-center">
        <img alt="source img" [src]="widgetData.content.sourceIconUrl" *ngIf="widgetData.content.sourceIconUrl"
          class="source-image mr-1" />
        <div *ngIf="widgetData.content.sourceName" class="source-name w-64 text-truncate" i18n-title title="Source">
          {{ widgetData.content.sourceName }}
        </div>
        <button type="button" mat-icon-button i18n-aria-label aria-label="action items" [matMenuTriggerFor]="cardMenu">
          <mat-icon>more_vertical</mat-icon>
        </button>
      </div>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardDescriptionBack>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-Client-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="rounded-t" role="link"
          aria-label="Content" i18n-aria-label="Content | Click to view">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
            [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
            [title]="widgetData.content.name" />
        </a>
        <button class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button (click)="isCardFlipped = true"
          aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>
        <ng-container *ngIf="widgetData.content?.completionStatus == 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="100" [progressType]="'percentage'">
          </ws-widget-content-progress>
        </ng-container>
        <ng-container *ngIf="widgetData.content?.completionStatus < 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
        </ng-container>
        <mat-card-content>
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
            i18n-aria-label>
            <div class="text-gray-600 complexity flex-middle">
              <mat-icon matTooltip="{{ imageIcon[1] }}">{{ imageIcon[0] }}</mat-icon>

              <div class="ws-mat-primary-text pl-2 text-lg title-text margin-bottom-xs margin-top-xs">
                {{ widgetData.content.name }}
              </div>
            </div>
            <div class="text-gray-600 duration flex-between flex-center pb-1">
              <div *ngIf="widgetData.content.duration" i18n-title title="Duration" class="overflow-hidden">
                {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
              </div>
              <div *ngIf="widgetData.content.viewCount && widgetData.content.viewCount.Client" class="duration-time"
                i18n-title title="View Count">
                {{ widgetData.content.viewCount.Client | pipeCountTransform }} views
              </div>
              <div *ngIf="!widgetData.content.viewCount || !widgetData.content.viewCount.Client" class="duration-time"
                i18n-title title="View Count">
                {{ 'cardcontentv2.noviews' | translate }}
              </div>
              <div *ngIf="widgetData.content.resourceType" class="resource-type" i18n-title title="resource Type">
                {{ widgetData.content.resourceType }}
              </div>
            </div>
          </a>
          <mat-divider></mat-divider>
          <div class="flex flex-middle">
            <ws-widget-btn-content-share [widgetData]="widgetData.content"></ws-widget-btn-content-share>

            <ws-widget-btn-playlist *ngIf="btnPlaylistConfig" [widgetData]="btnPlaylistConfig">
            </ws-widget-btn-playlist>
            <ws-widget-btn-content-download [widgetData]="
                widgetData.content
                  | pipePartialContent
                    : [
                        'identifier',
                        'contentType',
                        'resourceType',
                        'mimeType',
                        'downloadUrl',
                        'isExternal',
                        'artifactUrl'
                      ]
              "></ws-widget-btn-content-download>

            <mat-icon class="px-2 cursor-pointer" aria-label="Comment" i18n-aria-label matTooltip="Comment"
              i18n-matTooltip="Comment Button" [routerLink]="(widgetData.content | pipeContentRoute).url"
              [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [fragment]="'discussion-forum'">
              comment</mat-icon>
          </div>
        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>Description</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-description-trim mat-body-1">
          {{ widgetData.content.description }}
        </p>
      </ng-container>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardBasicDetails>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-standard-container mr-5"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData" role="link" class="rounded-t"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
      </a>
      <mat-card-content>
        <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData" role="link" aria-label="Content"
          i18n-aria-label>
          <div class="text-gray-600 complexity flex-between flex-center">
            <div *ngIf="widgetData.content.duration" class="duration" i18n-title title="Duration">
              {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </div>
          </div>
          <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div>
          <div class="description-text ws-mat-text-block-fade-gradient mb-4" i18n-title title="Description">
            {{ widgetData.content.description | pipeHtmlTagRemoval }}
          </div>
          <div class="text-gray-600 complexity flex-end">
            <div class="flex items-center">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" mat-icon-button i18n-aria-label aria-label="action items"
                [matMenuTriggerFor]="cardMenu">
                <mat-icon>more_vertical</mat-icon>
              </button>
            </div>
          </div>
        </a>
      </mat-card-content>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardDiscussion>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-discussions-container mr-6"
    [ngClass]="{
        greyOut:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
          disableClick:
            widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
              ? true
              : widgetData?.intranetMode === 'greyOut' && showIntranetContent
        }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <mat-card-content>
        <div class="flex flex-1 flex-row">
          <div class="flex-9 description-text mb-4" i18n-title title="Description">
            <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="['/app/discuss']" class="flex flex-column"
              [queryParams]="{'disid':'abc-bcdf-mnj-llk'}" role="link" aria-label="Content" i18n-aria-label>
              <h2 class="ws-mat-primary-text mat-title title-text"> {{ widgetData.content.name }}</h2>
            </a>
          </div>
          <div class="flex flex-1">
            <div class="ws-mat-default-text">
              <span>{{5}} {{'cardcontentv2.hoursAgo' | translate}}</span>
            </div>
          </div>
        </div>
        <div class="flex flex-1 flex-row">
          <div class="flex-9 description-text mb-4" i18n-title title="Description">
            {{'cardcontentv2.askedBy' | translate}} <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="['/app/person-profile']"
              [queryParams]="{'emailId':'amit.sengar@tarento.com'}" role="link" aria-label="Content" i18n-aria-label>
              <span class="ws-mat-default-text">{{'Amit Kumar'}}</span>
            </a>
          </div>
          <div class="flex flex-1">
            <div class="typeofc">
              <span>Law</span>
            </div>
          </div>
        </div>
        <div class="flex flex-1 flex-row">
          <div class="flex flex-1">
            <div class="flex flex-1 flex-row">
              <span>
                <mat-icon class="ws-mat-warn-text">thumb_up_off_alt</mat-icon>
              </span>
              &nbsp;
              <h3 class="ws-mat-warn-text">{{21}}</h3>
              &nbsp;
              &nbsp;
              <span>
                <mat-icon class="ws-mat-primary-text">reply</mat-icon>
              </span>
              &nbsp;
              <h3 class="ws-mat-warn-text">Reply</h3>
            </div>
          </div>
          <div class="flex flex-1 center-right">
            <span>view {{2}} replies
            </span>
          </div>
        </div>
      </mat-card-content>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardStandard>
  <mat-card class="card-standard-container mr-5 padding-remove cursor-pointer " [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="widgetData.content">
        <a (click)="raiseTelemetry();getRedirectUrlData(widgetData?.content); $event.stopPropagation()" 
            role="link" i18n-aria-label>
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <button *ngIf="showFlip" class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button
          (click)="isCardFlipped = true" aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>
        <mat-card-content class="min-top">
          <div style="position: relative; z-index: 1;">
            <ng-container *ngIf="widgetData.content.posterImage">
              <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy"
              class="card-img ws-mat-primary-lite-background margin-remove" [wsUtilsDefaultThumbnail]="defaultThumbnail"
              [alt]="widgetData.content.name" />
            </ng-container>
            <ng-container *ngIf="!widgetData.content.posterImage">
              <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
                <img mat-card-image [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy"
                class="card-img ws-mat-primary-lite-background margin-remove"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
                [alt]="widgetData.content.name" />
              </ng-container>
              <ng-template #defaultImg>
                <img mat-card-image [src]="defaultThumbnail" loading="lazy"
                class="card-img ws-mat-primary-lite-background margin-remove"
                [alt]="widgetData.content.name" />
              </ng-template>
            </ng-container>
            <div class="source-div" style="display: none;">
              <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
                [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            </div>
            <ng-container *ngIf="widgetData?.content?.cbPlanEndDate">
              <div class="cbp-mark">
                <span>{{widgetData?.content?.cbPlanEndDate | date: 'd MMM, y'}}</span>
              </div>
            </ng-container>
            <!-- <ng-container *ngIf="widgetData?.content?.endDate">
              <div class="cbp-mark">
                <p *ngIf="widgetData?.content?.planDuration === acbpConstants?.UPCOMING"  class="cbp-warning">{{widgetData?.content?.endDate | date: 'd MMM, y'}}</p>
                <p *ngIf="widgetData?.content?.planDuration === acbpConstants?.SUCCESS"  class="cbp-success">{{widgetData?.content?.endDate | date: 'd MMM, y'}}</p>
                <p *ngIf="widgetData?.content?.planDuration === acbpConstants?.OVERDUE" class="cbp-danger">Over due</p>
              </div>
            </ng-container> -->
            <ng-container *ngIf="cbPlanMapData && cbPlanMapData[widgetData?.content?.identifier]">
              <ng-container [ngTemplateOutlet]="cbpPlan" [ngTemplateOutletContext]="{data: {
                cbpData: cbPlanMapData[widgetData?.content?.identifier]
              }}"></ng-container>
            </ng-container>
            <div class="duration-box right-corner" *ngIf="widgetData?.content?.duration > 0">
              <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
              <span class=" ws-mat-white-text duration">
                {{ (widgetData?.content?.duration || 120)| pipeDurationTransform: 'hms' }}
              </span>
            </div>
            <div class="duration-box right-corner" *ngIf="widgetData?.content?.programDuration > 0">
              <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
              <span class=" ws-mat-white-text duration">
                {{widgetData?.content?.programDuration}} {{widgetData?.content?.programDuration === 1 ? 'day' : 'days'}}
              </span>
            </div>
          </div>
          <div class="padding-m">
            <div class="course_widget flex margin-remove">
              <div class="flex flex-end course_v2">
                <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs">video_library</mat-icon>
                <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                  class="ws-mat-black60-text font-normal mat-caption " [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
                  ?'Module'
                  :widgetData.content?.primaryCategory">

                </ws-widget-display-content-type>
              </div>
            </div>
            <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              {{ widgetData.content.name }}
            </div>
            <div class="flex w-full flex-wrap flex-middle">
              <div class="course_logo_box">
                <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
                [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
              </div>
              <span class="org-text">{{'cardcontentv2.by' | translate}} {{ (widgetData.content.organisation && widgetData.content.organisation[0]) ? widgetData.content.organisation[0] : 'Karmayogi Bharat' }}</span>
            </div>
            <div class="flex flex-middle rating-session margin-top-m">
              <div class="flex flex-middle" *ngIf="widgetData?.content?.avgRating">
                <mat-icon class="mr-1">star</mat-icon>
                <span>{{widgetData.content.avgRating}}</span>
              </div>
              <!-- <span class="most-enrolled-text margin-left-m">{{ 'cardcontentv2.mostEnrolled' | translate }}</span> -->
              <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostEnrolled')">
                <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostEnrolled' | translate }}</span>
              </ng-container>
              <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostTrending')">
                <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostTrending' | translate }}</span>
              </ng-container>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>{{'cardcontentv2.reason' | translate}}</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-justify mat-body-1">
          {{ widgetData.content.reason }}
        </p>
      </ng-container>
        </a>
      </ng-container>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardStandardGoals>
  <mat-card class="card-standard-container goals mr-5" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <div style="position: relative; z-index: 1;">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy" style="position: absolute; z-index: 2;"
            class="card-img ws-mat-primary-lite-background" [wsUtilsDefaultThumbnail]="defaultThumbnail"
            [alt]="widgetData.content.name" />
            <div class="course_logo_box">
              <img [src]="widgetData.content.creatorLogo | pipePublicURL" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            </div>
          <div class="source-div" style="display: none;">
            <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
          </div>
        </div>
        <button *ngIf="showFlip" class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button
          (click)="isCardFlipped = true" aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>


        <mat-card-content class="min-top">
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>

            <div class="text-gray-time complexity flex-between flex-center">
              <div *ngIf="showIsMode" i18n i18n-title title="{{'cardcontentv2.newlyAdded' | translate}}"
                class="mode-tag px-2 ws-mat-accent-background">
                {{'cardcontentv2.newlyAdded' | translate}}
              </div>
            </div>

            <div class="course_widget">
              <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
              <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                class="ws-mat-black60-text font-normal mat-caption text-uppercase" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
                ?'Module'
                :widgetData.content?.primaryCategory">

              </ws-widget-display-content-type>
            </div>

            <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              {{ widgetData.content.name }}
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-10">
              {{ widgetData.content.description | pipeHtmlTagRemoval }}
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-10">
              End date : {{ widgetData?.batch?.end | date: "MMM yyyy" }}
            </div>
          </a>
          <div class="mt-4 mb-2 flex justify-between items-center absolute bottom-0 left-0 right-0 px-3 py-2">
            <div class="flex flex-row justify-between w-full">
              <div *ngIf="widgetData.content.duration" class="duration flex ">
                <span class="time-text ws-mat-black60-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div>
              <div *ngIf="widgetData.content?.completionStatus == 2" class="flex">
                <p class="margin-remove-bottom">100%</p>
              </div>
              <div *ngIf="widgetData.content?.completionStatus < 2" class="flex">
                <p class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p>
              </div>
            </div>

            <div class="flex items-center">
            </div>
          </div>
          <ng-container *ngIf="widgetData.content?.completionStatus == 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
              [contentId]="widgetData.content?.identifier" [progress]="100"
              [progressType]="'percentage'">
            </ws-widget-content-progress>
          </ng-container>
          <ng-container *ngIf="widgetData.content?.completionStatus < 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
          </ng-container>

        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>{{'cardcontentv2.reason' | translate}}</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-justify mat-body-1">
          {{ widgetData.content.reason }}
        </p>
      </ng-container>



    </div>
  </mat-card>
</ng-template>
<ng-template #cardWide>
  <mat-card class="card-wide margin-bottom-m padding-remove position-relative flex">
    <div class="imageholder ">
      <img mat-card-image class="margin-remove"
      [src]="widgetData.content.posterImage || widgetData.content.appIcon  | pipePublicURL" [wsUtilsDefaultThumbnail]="defaultThumbnail"
      [alt]="widgetData.content.name">
      <div class="source-div" [hidden]="true">
        <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
          [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
      </div>
    </div>
    <mat-card-content class="mat-text-box">
      <p class="flex items-center mat-caption margin-bottom-xxs text-uppercase" *ngIf="widgetData.content.contentType === 'Resource' || widgetData.content.contentType === 'Course' || widgetData.content.contentType === 'Module'">


        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Audio" *ngIf="widgetData.content.mimeType === 'audio/mpeg'">
          mic</mat-icon>


        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Assessment" *ngIf="widgetData.content.mimeType === 'application/json' || widgetData.content.mimeType === 'application/quiz'">
          assessment</mat-icon>


        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="PDF" *ngIf="widgetData.content.mimeType === 'application/pdf'">
          picture_as_pdf</mat-icon>


        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Video" *ngIf="widgetData.content.mimeType === 'video/mp4' || widgetData.content.mimeType === 'video/x-youtube' || widgetData.content.mimeType === 'application/x-mpegURL'">
          videocam</mat-icon>


        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Course"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.content-collection'">
          video_library
        </mat-icon>


        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="HTML"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.html-archive' || widgetData.content.mimeType === 'application/vnd.ekstep.ecml-archive' || widgetData.content.mimeType === 'text/x-url' || widgetData.content.mimeType === 'application/survey'">
          attachment
        </mat-icon>


        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Module"  *ngIf="widgetData.content.mimeType === 'image/jpeg' || widgetData.content.mimeType === 'image/png'">
          image
        </mat-icon>
        {{ translateLabel(widgetData.content.primaryCategory || widgetData.content.contentType, 'searchfilters') }}
        <!-- {{widgetData.content.primaryCategory || widgetData.content.contentType}} -->
      </p>
      <div class="flex main_title_box">
        <p class="mat-subheading-1 margin-bottom-xs font-bold-imp cursor-pointer content-title">
          <a [routerLink]="['/app/toc/',widgetData.content.identifier,'overview']"
            [queryParams]="{primaryCategory: widgetData.content.primaryCategory}" [state]="widgetData?.stateData">
            {{widgetData.content.name}}
          </a>
      </p>
      </div>

      <div class="bottomsection">
        <p class="mat-body-2 ws-mat-black-text margin-bottom-xxs" *ngIf="widgetData.content.creator">{{'cardcontentv2.by' | translate}} {{widgetData.content.creator}}</p>
        <div class="contentdata margin-bottom-xm">
          <ul
            class="mat-body-2 margin-remove-top margin-bottom-xs padding-remove ws-mat-black60-text highlighting_list">

            <li *ngIf="widgetData.content.lastUpdatedOn">

                {{ widgetData.content.lastUpdatedOn | date: "MMM yyyy"  }}
            </li>
            <li *ngIf="widgetData.content.duration">
                <img class="text_seperator" src="/assets/icons/content/separator.svg">  {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </li>

          </ul>
        </div>
          <div *ngIf="widgetData?.content?.batch?.endDate">
            <p>{{'cardcontentv2.deadline' | translate}} - {{widgetData.content.batch?.endDate | date: "d MMM yyyy"}}</p>
          </div>
          <div class="tags" *ngIf="widgetData.content.keywords && widgetData.content.keywords.length > 0">
            <ul class="mat-caption margin-remove-top padding-remove tag_list">
              <li *ngFor="let tag of widgetData.content.keywords">
                <span class="tag">{{tag}}</span>
              </li>
            </ul>
          </div>

      </div>
    </mat-card-content>
  </mat-card>
</ng-template>

<ng-template #cardWideV2>
  <mat-card class="card-wide-v2 padding-remove position-relative flex">
    <div class="imageholder ">
      <img mat-card-image class="margin-remove"
      [src]="widgetData.content.posterImage || widgetData.content.appIcon  | pipePublicURL" [wsUtilsDefaultThumbnail]="defaultThumbnail"
      [alt]="widgetData.content.name">
      <div class="source-div" [hidden]="true">
        <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
          [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
      </div>
      <div class="duration-box right-corner" *ngIf="widgetData?.content?.duration > 0">
        <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
        <span class=" ws-mat-white-text duration"> {{ (widgetData?.content?.duration || 120)| pipeDurationTransform: 'hms' }}</span>
      </div>
      <ng-container *ngIf="cbPlanMapData && cbPlanMapData[widgetData?.content?.identifier]">
        <ng-container [ngTemplateOutlet]="cbpPlan" [ngTemplateOutletContext]="{data: {
          cbpData: cbPlanMapData[widgetData?.content?.identifier]
        }}"></ng-container>
      </ng-container>
    </div>
    <mat-card-content class="mat-text-box">
      <div class="course_widget flex flex-between margin-remove">
        <div class="flex flex-end course_v2">
          <ng-container *ngIf="widgetData.content.contentType === 'Resource' || widgetData.content.contentType === 'Course' || widgetData.content.contentType === 'Module'">
            <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Audio" *ngIf="widgetData.content.mimeType === 'audio/mpeg'">
              mic</mat-icon>

            <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Assessment" *ngIf="widgetData.content.mimeType === 'application/json' || widgetData.content.mimeType === 'application/quiz'">
              assessment</mat-icon>

            <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="PDF" *ngIf="widgetData.content.mimeType === 'application/pdf'">
              picture_as_pdf</mat-icon>

            <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Video" *ngIf="widgetData.content.mimeType === 'video/mp4' || widgetData.content.mimeType === 'video/x-youtube' || widgetData.content.mimeType === 'application/x-mpegURL'">
              videocam</mat-icon>

            <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Course"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.content-collection'">
              video_library
            </mat-icon>

            <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="HTML"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.html-archive' || widgetData.content.mimeType === 'application/vnd.ekstep.ecml-archive' || widgetData.content.mimeType === 'text/x-url' || widgetData.content.mimeType === 'application/survey'">
              attachment
            </mat-icon>

            <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Module"  *ngIf="widgetData.content.mimeType === 'image/jpeg' || widgetData.content.mimeType === 'image/png'">
              image
            </mat-icon>
            <span class="ws-mat-black60-text font-normal mat-caption ">
              <!-- {{widgetData.content.primaryCategory || widgetData.content.contentType}} -->
              {{ translateLabel(widgetData.content.primaryCategory || widgetData.content.contentType, 'searchfilters') }}
            </span>
          </ng-container>
        </div>
      </div>

      <div class="flex main_title_box">
        <p class="mat-subheading-1 title-text font-bold-imp cursor-pointer content-title">
          <a (click)="raiseTelemetry();getRedirectUrlData(widgetData?.content); $event.stopPropagation()">
            {{widgetData.content.name}}
          </a>
      </p>
      </div>

      <div class="bottomsection">
        <div class="flex w-full flex-wrap flex-middle provider">
          <div class="course_logo_box">
            <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
            [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
          </div>
          <span class="org-text">{{'cardcontentv2.by' | translate}} {{widgetData?.content?.organisation[0] }}</span>
        </div>
        <div class="flex flex-middle rating-session margin-top-xs">
          <div class="flex flex-middle" *ngIf="widgetData?.content?.avgRating">
            <mat-icon>star</mat-icon>
            <span class="rating-number">{{widgetData?.content?.avgRating}}</span>
          </div>
          <!-- <span class="most-enrolled-text margin-left-m">{{ 'cardcontentv2.mostEnrolled' | translate }}</span> -->
          <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostEnrolled')">
            <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostEnrolled' | translate }}</span>
          </ng-container>
          <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostTrending')">
            <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostTrending' | translate }}</span>
          </ng-container>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>

<ng-template #cardPortrait>
    <mat-card class="card-portrait cursor-pointer" [ngClass]="widgetData.cardCustomeClass ? widgetData.cardCustomeClass : ''" (click)="raiseTelemetry();getRedirectUrlData(widgetData?.content); $event.stopPropagation()" >
      <div class="course_widget portrait_widget flex  margin-bottom-xs">
        <div class="flex flex-end flex-middle course_port">
          <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
          <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
            class="ws-mat-black60-text font-normal mat-caption " [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
            ?'Module'
            :widgetData.content?.primaryCategory">
          </ws-widget-display-content-type>
        </div>
      </div>
      <div class="flex">
        <div class="margin-right-s">
          <ng-container *ngIf="widgetData.content.posterImage">
            <div class=" img-block-portrait position-relative">
              <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy"
              class="card-image ws-mat-primary-lite-background margin-remove" [wsUtilsDefaultThumbnail]="defaultThumbnail"
              [alt]="widgetData.content.name" />
              <div class="duration-box right-corner-portrait" *ngIf="widgetData?.content?.duration > 0">
                <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
                <span class=" ws-mat-white-text duration">
                  {{ (widgetData?.content?.duration || 120)| pipeDurationTransform: 'hms' }}
                </span>
              </div>
              <div class="duration-box right-corner-portrait" *ngIf="widgetData?.content?.programDuration > 0">
                <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
                <span class=" ws-mat-white-text duration">
                  {{widgetData?.content?.programDuration}} {{widgetData?.content?.programDuration === 1 ? 'day' : 'days'}}
                </span>
              </div>
              <ng-container *ngIf="cbPlanMapData && cbPlanMapData[widgetData?.content?.identifier]">
                    <ng-container [ngTemplateOutlet]="cbpPlan" [ngTemplateOutletContext]="{data: {
                      cbpData: cbPlanMapData[widgetData?.content?.identifier]
                    }}"></ng-container>
              </ng-container>
            </div>
          </ng-container>
          <ng-container *ngIf="!widgetData.content.posterImage">
            <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
              <img mat-card-image [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy"
              class="card-image ws-mat-primary-lite-background margin-remove"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
              [alt]="widgetData.content.name" />
            </ng-container>
            <ng-template #defaultImg>
              <img mat-card-image [src]="defaultThumbnail" loading="lazy"
              class="card-image ws-mat-primary-lite-background margin-remove"
              [alt]="widgetData.content.name" />
            </ng-template>
          </ng-container>
        </div>
        <div class="width-1-1">
          <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="portrait-subheading mat-subheading-2 title-text">
              {{ widgetData.content.name }}
          </div>
          <div class="flex w-full  flex-middle">
            <div class="portrait_course_logo_box margin-right-xs">
              <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon"  loading="lazy" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            </div>
            <span class="portrait-org-name font-normal mat-caption">{{'cardcontentv2.by' | translate}} {{ (widgetData.content.organisation && widgetData.content.organisation[0]) ? widgetData.content.organisation[0] : 'Karmayogi Bharat' }}</span>
          </div>
          <!-- <div class="portrait_widget flex margin-top-xs">
            <div class="flex flex-end flex-middle">
              <mat-icon class="mat-icon  video-icon margin-right-xs">video_library</mat-icon>
              <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                class="portrait-category" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
                ?'Module'
                :widgetData.content?.primaryCategory">
              </ws-widget-display-content-type>
            </div>
          </div> -->

        </div>
      </div>
      <ng-container *ngIf="widgetData.content?.completionPercentage < 100">
        <div class="flex flex-align-end progress-wrapper flex-between" >
          <div class="progress-block" >
            <div class="completed-time">
              <mat-icon class="mat-icon  schedule margin-right-xs">schedule</mat-icon>
              <span>{{widgetData.content?.completionPercentage}}%</span>
            </div>
            <div>
              <ng-container *ngIf="widgetData.content?.completionStatus < 2">
                <ws-widget-content-progress class="progress-bar-new" [customClassName]="'course-progress-bar'" *ngIf="widgetData.content?.identifier"
                [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
                [progressType]="'percentage'">
              </ws-widget-content-progress>
              </ng-container>
            </div>
          </div>
          <div class="progress-btn">
            <button class="resume-btn flex flex-middle flex-between" [routerLink]="['/app/toc/',widgetData.content.identifier,'overview']"
            [queryParams]="{primaryCategory: widgetData.content.primaryCategory}" [state]="widgetData?.stateData" 
            [matTooltipPosition]="'below'"
            [matTooltipDisabled]="(!widgetData.content?.completionPercentage ? translateLabels('start', 'cardcontentv2') : translateLabels('resume', 'cardcontentv2')).length < 11"
            matTooltip="{{!widgetData.content?.completionPercentage ? translateLabels('start', 'cardcontentv2') : translateLabels('resume', 'cardcontentv2')}}">
              <span class="textwrap margin-right-xs">
                {{!widgetData.content?.completionPercentage ? translateLabels('start', 'cardcontentv2') : translateLabels('resume', 'cardcontentv2')}}</span>
              <img class="stats-icon" height="20" width="20" src="/assets/icons/home/play.svg">
            </button>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="widgetData.content?.completionPercentage === 100">
        <div class="flex flex-align-end progress-wrapper flex-end mt-1">
          <div class="progress-btn">
            <button class="resume-btn flex flex-middle flex-between view-btn" [ngClass]="{'disable-btn': downloadCertificateLoading || widgetData?.content?.issuedCertificates?.length === 0}" (click)="!downloadCertificateLoading && downloadCertificate(widgetData.content);$event.stopPropagation()" 
            [matTooltipPosition]="'below'"
            [matTooltipDisabled]="(translateLabels('viewCertificate', 'cardcontentv2')).length < 11"
            matTooltip="{{'cardcontentv2.viewCertificate' | translate }}">
              <span class="margin-right-xs textwrap">{{'cardcontentv2.viewCertificate' | translate }}</span>
              <img class="stats-icon" *ngIf="!downloadCertificateLoading" height="20" width="20" src="/assets/icons/home/eye-white.svg">
              <div class="center flex flex-middle"  *ngIf="downloadCertificateLoading">
                <mat-spinner strokeWidth="2" stroke="'red'" class="white-spinner" [diameter]="16"></mat-spinner>
              </div>
            </button>
          </div>
        </div>
      </ng-container>
    </mat-card>
</ng-template>

<ng-template #cardWideV2Skelton>
  <mat-card class="card-wide-v2 padding-remove position-relative flex">
    <div class="">
      <ws-widget-skeleton-loader [width]="'100%'" [height]="'100%'" class="h-full" [bindingClass]="'flex rounded h-full min-height-width'"></ws-widget-skeleton-loader>
    </div>
    <mat-card-content class="mat-text-box">
      <div class="course_widget flex margin-remove">
        <div class="flex flex-end ">
          <ws-widget-skeleton-loader [width]="'100px'" [height]="'21px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </div>
      </div>

      <div class="flex main_title_box">
        <!-- <p class="mat-subheading-1 title-text font-bold-imp cursor-pointer content-title"> -->
          <ws-widget-skeleton-loader [width]="'100%'" [height]="'21px'" class="w-full h-full mt-2" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
      <!-- </p> -->
      </div>

      <div class="bottomsection">
        <div class="flex w-full flex-wrap flex-middle">
          <div class="course_logo_box mr-2">
            <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
          </div>
          <ws-widget-skeleton-loader [width]="'100px'" [height]="'16px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </div>
        <div class="flex flex-middle rating-session margin-top-xs">
          <div class="flex flex-middle mr-2">
            <ws-widget-skeleton-loader [width]="'50px'" [height]="'16px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
          </div>
          <ws-widget-skeleton-loader [width]="'80px'" [height]="'16px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>

<ng-template #cardPortraitSkeleton>
  <mat-card class="card-portrait" [ngClass]="widgetData.cardCustomeClass ? widgetData.cardCustomeClass : ''">
    <div class="margin-bottom-xs">
      <ng-container>
        <ws-widget-skeleton-loader [width]="'147px'" [height]="'26px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
      </ng-container>
    </div>
    <div class="flex">
      <div class="margin-right-s">
        <ng-container>
          <ws-widget-skeleton-loader [width]="'147px'" [height]="'98px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </ng-container>
      </div>
      <div class="width-1-1">
        <div class="portrait-subheading title-text">
            <ws-widget-skeleton-loader [bindingClass]="'flex rounded width-1-1'"></ws-widget-skeleton-loader>
        </div>
        <div class="flex w-full flex-wrap flex-middle">
          <div class=" margin-right-xs">
            <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"  [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
          </div>
          <span class=""><ws-widget-skeleton-loader [width]="'133px'" [height]="'12px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader></span>
        </div>
        <div class="portrait_widget flex margin-top-xs">
          <div class="flex flex-end flex-middle">
            <ws-widget-skeleton-loader [width]="'65px'" [height]="'12px'"  [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-align-end progress-wrapper flex-between">
      <div class="progress-block">
        <div class="completed-time">
          <ws-widget-skeleton-loader [width]="'211px'" [height]="'16px'"  [bindingClass]="'flex rounded margin-top-xs md:w-211'"></ws-widget-skeleton-loader>
        </div>
      </div>
      <div class="progress-btn">
        <ws-widget-skeleton-loader [width]="'117px'" [height]="'32px'"  [bindingClass]="'flex rounded margin-top-xs'"></ws-widget-skeleton-loader>
      </div>
    </div>
  </mat-card>
</ng-template>

<!-- curated collection cards -->
<ng-template #cardCurated>
  <mat-card class="card-standard-container mr-5 curated" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="widgetData?.content?.linkUrl" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <div style="position: relative; z-index: 1;">
          <ng-container *ngIf="widgetData.content.posterImage">
            <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy" style="position: absolute; z-index: 2;"
            class="card-img ws-mat-primary-lite-background"
            [alt]="widgetData.content.name" />
          </ng-container>
          <ng-container *ngIf="!widgetData.content.posterImage">
            <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
              <img mat-card-image [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy" style="position: absolute; z-index: 2;"
              class="card-img ws-mat-primary-lite-background"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
              [alt]="widgetData.content.name" />
            </ng-container>
            <ng-template #defaultImg>
              <img mat-card-image [src]="defaultThumbnail" loading="lazy" style="position: absolute; z-index: 2;"
              class="card-img ws-mat-primary-lite-background"
              [alt]="widgetData.content.name" />
            </ng-template>
          </ng-container>
          <div class="source-div" style="display: none;">
            <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
          </div>
        </div>
        <button *ngIf="showFlip" class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button
          (click)="isCardFlipped = true" aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>
        <mat-card-content class="min-top">
          <a (click)="raiseTelemetry(); $event.stopPropagation()" [routerLink]="widgetData?.content?.linkUrl" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>
            <div class="text-gray-time complexity flex-between flex-center">
              <div *ngIf="showIsMode" i18n i18n-title title="{{'cardcontentv2.newlyAdded' | translate}}"
                class="mode-tag px-2 ws-mat-accent-background">
                {{'cardcontentv2.newlyAdded' | translate}}
              </div>
            </div>

            <div class="course_logo_box">
              <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            </div>

            <div class="course_widget">
              <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
              <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                class="ws-mat-black60-text font-normal mat-caption text-uppercase" [displayContentType]="widgetData.content?.primaryCategory === 'CuratedCollections'
                ? 'Curated collection'
                : widgetData.content?.primaryCategory">

              </ws-widget-display-content-type>
            </div>

            <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              {{ widgetData.content.name }}
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-2">
              {{ widgetData.content.description | pipeHtmlTagRemoval }}
            </div>
            <div class="mat-body-2  mb-5" *ngIf="widgetData?.content?.batch?.endDate">
              {{'cardcontentv2.deadline' | translate}}: {{ widgetData?.content?.batch?.endDate | date: "d MMM yyyy" }}
            </div>
          </a>
          <div class="mt-4 mb-2 flex justify-between items-center absolute bottom-0 left-0 right-0 px-3 py-2">

            <div class="flex flex-row justify-between w-full">
              <div *ngIf="widgetData.content.duration" class="duration flex ">
                <span class="time-text ws-mat-black60-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div>

              <div *ngIf="widgetData.content?.completionStatus == 2" class="flex">
                <p class="margin-remove-bottom">100%</p>
              </div>
              <div *ngIf="widgetData.content?.completionStatus < 2" class="flex">
                <p class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p>
              </div>

            </div>
            <div class="flex items-center">
            </div>
          </div>
          <ng-container *ngIf="widgetData.content?.completionStatus == 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
              [contentId]="widgetData.content?.identifier" [progress]="100"
              [progressType]="'percentage'">
            </ws-widget-content-progress>
          </ng-container>
          <ng-container *ngIf="widgetData.content?.completionStatus < 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
          </ng-container>

        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>{{'cardcontentv2.reason' | translate}}</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-justify mat-body-1">
          {{ widgetData.content.reason }}
        </p>
      </ng-container>
      </a>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardStandardSkeleton>
  <mat-card class="card-standard-container mr-5 padding-remove" >
    <div class="display-contents" >
      <ng-container *ngIf="!isCardFlipped">
        <mat-card-content class="min-top">
          <div style="position: relative; z-index: 1;">
            <ng-container>
              <ws-widget-skeleton-loader [width]="'100%'" [height]="'140px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
            </ng-container>
          </div>
          <div class="padding-m">
            <div class="course_widget flex margin-remove">
              <div class="flex flex-end">
                <ws-widget-skeleton-loader [width]="'65px'" [height]="'16px'" [bindingClass]="'flex rounded br-8'"></ws-widget-skeleton-loader>
              </div>
            </div>
            <div class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              <ws-widget-skeleton-loader [width]="'100%'" [height]="'16px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
              <ws-widget-skeleton-loader [width]="'111px'" [height]="'16px'" [bindingClass]="'flex rounded margin-top-s'"></ws-widget-skeleton-loader>
            </div>
            <div class="flex w-full flex-wrap flex-middle margin-top-m">
              <div class="">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
              </div>
              <span class="org-text"> <ws-widget-skeleton-loader [width]="'111px'" [height]="'16px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader></span>
            </div>
            <div class="flex flex-middle rating-session margin-top-m">
              <div class="flex flex-middle">
                <ws-widget-skeleton-loader [width]="'45px'" [height]="'12px'" [bindingClass]="'flex rounded margin-top-m'"></ws-widget-skeleton-loader>
              </div>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardPortraitClick>
  <a class="cursor-pointer" (click)="raiseTelemetry();getRedirectUrlData(widgetData?.content); $event.stopPropagation()" 
  role="link" i18n-aria-label>
  <mat-card class="card-portrait mr-2 card-portrait-clickable min-height-remove" [ngClass]="widgetData.cardCustomeClass ? widgetData.cardCustomeClass : ''">
     <div class="course_widget portrait_widget flex  margin-bottom-xs">
        <div class="flex flex-end flex-middle course_port">
           <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
           <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
           class="ws-mat-black60-text font-normal mat-caption " [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
           ?'Module'
           :widgetData.content?.primaryCategory">
           </ws-widget-display-content-type>
        </div>
     </div>
     <div class="flex">
        <div class="margin-right-s">
           <ng-container *ngIf="widgetData.content.posterImage">
              <div class=" img-block-portrait position-relative">
                 <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy"
                 class="card-image ws-mat-primary-lite-background margin-remove" [wsUtilsDefaultThumbnail]="defaultThumbnail"
                 [alt]="widgetData.content.name" />
                 <div class="duration-box right-corner-portrait" *ngIf="widgetData?.content?.duration > 0">
                    <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
                    <span class=" ws-mat-white-text duration">
                    {{ (widgetData?.content?.duration || 120)| pipeDurationTransform: 'hms' }}
                    </span>
                 </div>
                 <div class="duration-box right-corner-portrait" *ngIf="widgetData?.content?.programDuration > 0">
                    <mat-icon class="mat-icon main_icon mr-1">access_time</mat-icon>
                    <span class=" ws-mat-white-text duration">
                    {{widgetData?.content?.programDuration}} {{widgetData?.content?.programDuration === 1 ? 'day' : 'days'}}
                    </span>
                 </div>
                 <!-- <ng-container *ngIf="widgetData?.content?.endDate">
                  <div class="cbp-mark left-0 border-top-radius">
                    <p *ngIf="widgetData?.content?.planDuration === acbpConstants?.UPCOMING"  class="cbp-warning">{{widgetData?.content?.endDate | date: 'd MMM, y'}}</p>
                    <p *ngIf="widgetData?.content?.planDuration === acbpConstants?.SUCCESS"  class="cbp-success">{{widgetData?.content?.endDate | date: 'd MMM, y'}}</p>
                    <p  *ngIf="widgetData?.content?.planDuration === acbpConstants?.OVERDUE"    class="cbp-danger">Over due</p>
                  </div>
                </ng-container> -->
                <ng-container *ngIf="cbPlanMapData && cbPlanMapData[widgetData?.content?.identifier]">
                  <ng-container [ngTemplateOutlet]="cbpPlan" [ngTemplateOutletContext]="{data: {
                    cbpData: cbPlanMapData[widgetData?.content?.identifier]
                  }}"></ng-container>
                </ng-container>
              </div>
           </ng-container>
           <ng-container *ngIf="!widgetData.content.posterImage">
              <ng-container *ngIf="widgetData.content.appIcon; else defaultImg">
                 <img mat-card-image [src]="widgetData.content.appIcon | pipePublicURL" loading="lazy"
                 class="card-image ws-mat-primary-lite-background margin-remove"  [wsUtilsDefaultThumbnail]="defaultThumbnail"
                 [alt]="widgetData.content.name" />
              </ng-container>
              <ng-template #defaultImg>
                 <img mat-card-image [src]="defaultThumbnail" loading="lazy"
                 class="card-image ws-mat-primary-lite-background margin-remove"
                 [alt]="widgetData.content.name" />
              </ng-template>
           </ng-container>
        </div>
        <div class="width-1-1">
           <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="portrait-subheading mat-subheading-2 title-text">
              {{ widgetData.content.name }}
           </div>
           <div class="flex w-full  flex-middle">
              <div class="portrait_course_logo_box margin-right-xs">
                 <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon"  loading="lazy" [wsUtilsDefaultThumbnail]="defaultSLogo"
                 [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
              </div>
              <span class="portrait-org-name font-normal mat-caption">{{'cardcontentv2.by' | translate}} {{ (widgetData.content.organisation && widgetData.content.organisation[0]) ? widgetData.content.organisation[0] : 'Karmayogi Bharat' }}</span>
           </div>

           <div class="flex flex-middle rating-session margin-top-xs">
            <div class="flex flex-middle" *ngIf="widgetData?.content?.avgRating">
              <mat-icon class="mr-1">star</mat-icon>
              <span>{{widgetData.content.avgRating}}</span>
            </div>
            <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostEnrolled')">
              <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostEnrolled' | translate }}</span>
            </ng-container>
            <ng-container *ngIf="widgetData?.content?.additionalTags && widgetData?.content?.additionalTags.includes('mostTrending')">
              <span class="most-enrolled-text margin-left-xs">{{ 'cardcontentv2.mostTrending' | translate }}</span>
            </ng-container>
          </div>
        </div>
     </div>
  </mat-card>
  </a>
</ng-template>

<ng-template #cardPortraitClickSkeleton>
  <mat-card class="card-portrait mr-2 card-portrait-clickable" [ngClass]="widgetData.cardCustomeClass ? widgetData.cardCustomeClass : ''">
    <div class="flex">
      <div class="margin-right-s">
        <ng-container>
          <ws-widget-skeleton-loader [width]="'147px'" [height]="'100px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </ng-container>
      </div>
      <div class="width-1-1">
        <div class="portrait-subheading title-text">
            <ws-widget-skeleton-loader [bindingClass]="'flex rounded width-1-1'"></ws-widget-skeleton-loader>
        </div>
        <div class="flex w-full flex-wrap flex-middle">
            <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'"  [bindingClass]="'flex rounded margin-right-xs'"></ws-widget-skeleton-loader>
            <ws-widget-skeleton-loader [width]="'100px'" [height]="'12px'" [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
        </div>
        <div class="portrait_widget flex margin-top-xs">
          <div class="flex flex-end flex-middle">
            <ws-widget-skeleton-loader [width]="'65px'" [height]="'12px'"  [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
</ng-template>

<ng-template #cbpPlan  let-data="data">
  <div class="cbp-mark left-0 border-top-radius">
    <p *ngIf="data.cbpData.planDuration === acbpConstants?.UPCOMING"  class="cbp-warning">{{data.cbpData.endDate | date: 'd MMM, y'}}</p>
    <p *ngIf="data.cbpData.planDuration === acbpConstants?.SUCCESS"  class="cbp-success">{{data.cbpData.endDate | date: 'd MMM, y'}}</p>
    <p *ngIf="data.cbpData.planDuration === acbpConstants?.OVERDUE" class="cbp-danger">{{'cardcontentv2.overDue' | translate}}</p>
  </div>
</ng-template>
