<!--  -->
<ng-container *ngIf="widgetData && (((widgetData?.deletedMode || 'none') === 'hide' && !!!isLiveOrMarkForDeletion)
? false
: !((widgetData?.intranetMode || 'none') === 'hide' && !!showIntranetContent))"
  [ngSwitch]="( (widgetData && widgetData?.cardSubType) || 'cardStandard')">
  <ng-container *ngSwitchCase="'minimal'" [ngTemplateOutlet]="cardMinimal"></ng-container>
  <ng-container *ngSwitchCase="'space-saving'" [ngTemplateOutlet]="cardSpaceSaving"></ng-container>
  <ng-container *ngSwitchCase="'basic-info'" [ngTemplateOutlet]="cardBasicInformation"></ng-container>
  <!-- <ng-container *ngSwitchCase="'card-user-details'" [ngTemplateOutlet]="cardWithUserDetails"></ng-container> -->
  <ng-container *ngSwitchCase="'card-description-back'" [ngTemplateOutlet]="cardDescriptionBack"></ng-container>
  <ng-container *ngSwitchCase="'basic-details'" [ngTemplateOutlet]="cardBasicDetails"></ng-container>
  <ng-container *ngSwitchCase="'card-discussion'" [ngTemplateOutlet]="cardDiscussion"></ng-container>
  <ng-container *ngSwitchCase="'card-wide'" [ngTemplateOutlet]="cardWide"></ng-container>
  <ng-container *ngSwitchDefault [ngTemplateOutlet]="cardStandard"></ng-container>
</ng-container>

<ng-template #cardMinimal>
  <div [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-minimal-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="card-link" role="link"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img [src]="widgetData.content.posterImage | pipePublicURL" class="card-thumbnail ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
      </a>
      <div class="card-overlay">
        <h3 *ngIf="widgetData.content.name" class="text-truncate card-title">
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link">
            {{ widgetData.content.name }}
          </a>

        </h3>
        <div class="flex justify-between items-center">
          <div>
            <ws-widget-display-content-type i18n-title title="Content Type"
              *ngIf="widgetData.content?.displayContentType" class="mr-4 font-normal"
              [displayContentType]="widgetData.content?.displayContentType">
            </ws-widget-display-content-type>
            <span *ngIf="widgetData.content.duration" i18n-title title="Duration">
              {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </span>
          </div>
          <button mat-icon-button i18n-aria-label aria-label="action items" [matMenuTriggerFor]="cardMenu">
            <mat-icon>more_vertical</mat-icon>
          </button>
        </div>
      </div>
      <!-- <ng-container *ngIf="widgetData.content?.completionStatus == 2">
        <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
          [contentId]="widgetData.content?.identifier" [progress]="100"
          [progressType]="'percentage'">
        </ws-widget-content-progress>
      </ng-container>
      <ng-container *ngIf="widgetData.content?.completionStatus < 2">
        <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
        [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
        [progressType]="'percentage'">
      </ws-widget-content-progress>
      </ng-container> -->

    </div>
  </div>
</ng-template>
<mat-menu #cardMenu="matMenu">
  <ng-template matMenuContent>
    <div mat-menu-item>

      <!-- TODO: Added this view details, as a temp replacement for share and other functionalities, as they are not working-->
      <a mat-menu-item (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="flex flex-middle">
        <mat-icon>toc</mat-icon>
        <h3 class="margin-remove" i18n>
          View details
        </h3>
      </a>

      <ws-widget-btn-content-download [widgetData]="
          widgetData.content
            | pipePartialContent
              : [
                  'identifier',
                  'contentType',
                  'resourceType',
                  'mimeType',
                  'downloadUrl',
                  'isExternal',
                  'artifactUrl'
                ]
        "></ws-widget-btn-content-download>
      <!-- <ws-widget-btn-content-like [widgetData]="widgetData.content | pipePartialContent: ['identifier']">
      </ws-widget-btn-content-like> -->
      <ws-widget-btn-content-mail-me [widgetData]="widgetData.content"></ws-widget-btn-content-mail-me>
      <!-- TODO: Hiding this for now, as its not working -->
      <!-- <ws-widget-btn-content-share [widgetData]="widgetData.content"></ws-widget-btn-content-share> -->
      <ws-widget-btn-channel-analytics [widgetData]="widgetData.content"></ws-widget-btn-channel-analytics>
      <ws-widget-btn-kb [contentId]="widgetData?.content?.identifier" [forPreview]="false"
        [contentName]="widgetData?.content?.name" [contentType]="widgetData?.content?.contentType">
      </ws-widget-btn-kb>
      <!-- <ws-widget-btn-follow [widgetData]="{
          targetId: widgetData?.content?.identifier,
          type: widgetData?.content?.contentType
        }" *ngIf="isKnowledgeBoard"></ws-widget-btn-follow> -->
      <!-- TODO: Hiding this for now, as its not working -->
      <!-- <ws-widget-btn-goals *ngIf="btnGoalsConfig" [widgetData]="btnGoalsConfig"></ws-widget-btn-goals>
      <ws-widget-btn-playlist *ngIf="btnPlaylistConfig" [widgetData]="btnPlaylistConfig">
      </ws-widget-btn-playlist> -->
      <ws-widget-btn-kb-analytics [widgetData]="
          widgetData.content
            | pipePartialContent
              : [
                  'identifier',
                  'contentType',
                  'resourceType',
                  'mimeType',
                  'downloadUrl',
                  'isExternal',
                  'artifactUrl'
                ]
        "></ws-widget-btn-kb-analytics>
    </div>
  </ng-template>
</mat-menu>

<ng-template #cardSpaceSaving>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-space-saving-container mr-6"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="rounded-t"
          aria-label="Content" i18n-aria-label="Content | Click to view">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
            [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
            [title]="widgetData.content.name" />
        </a>
        <!-- <ng-container *ngIf="widgetData.content?.completionStatus == 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="100"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
        </ng-container>
        <ng-container *ngIf="widgetData.content?.completionStatus < 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
          [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
          [progressType]="'percentage'">
        </ws-widget-content-progress>
        </ng-container> -->
        <mat-card-content>
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
            i18n-aria-label>
            <div class="card-header-meta">
              <ws-widget-display-content-type i18n-title title="Content Type"
                *ngIf="widgetData.content?.displayContentType" class="ws-mat-primary-text font-normal"
                [displayContentType]="widgetData.content?.displayContentType">
              </ws-widget-display-content-type>
              <span *ngIf="widgetData.content.duration" class="text-gray-600" i18n-title title="Duration">
                &nbsp;&nbsp;|&nbsp;&nbsp;{{
                widgetData.content.duration | pipeDurationTransform: 'hms'
                }}
              </span>
            </div>
            <div class="ws-mat-primary-text mat-title text-truncate title-text" title="Title" i18n-title>
              {{ widgetData.content.name }}
            </div>
          </a>
          <div class="mt-4 flex justify-between items-center flip-actions">
            <div>
              <div *ngIf="widgetData.content.sourceName" class="ws-mat-primary-text mat-subheading-1 source-name"
                i18n-title title="Source">
                {{ widgetData.content.sourceName }}
              </div>
              <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level" class="text-gray-600">
                {{ widgetData.content.complexityLevel }}
              </div>
            </div>
            <div class="flex">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" (click)="isCardFlipped = !isCardFlipped" mat-icon-button i18n-aria-label
                aria-label="action items">
                <mat-icon>flip_to_back</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <mat-card-content>
          <div class="card-header-meta">
            <ws-widget-display-content-type i18n-title title="Content Type"
              *ngIf="widgetData.content?.displayContentType" class="ws-mat-primary-text font-normal"
              [displayContentType]="widgetData.content?.displayContentType">
            </ws-widget-display-content-type>
            <span *ngIf="widgetData.content.duration" class="text-gray-600" i18n-title title="Duration">
              &nbsp;&nbsp;|&nbsp;&nbsp;{{
              widgetData.content.duration | pipeDurationTransform: 'hms'
              }}
            </span>
          </div>
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" aria-label="Content"
            i18n-aria-label="Content | Click to view" class="ws-mat-primary-text mat-title text-truncate title-text">
            {{ widgetData.content.name }}
          </a>
          <div *ngIf="widgetData?.content?.description" class="mt-4 flip-desc-text ws-mat-text-block-fade-gradient">
            {{ widgetData?.content?.description }}
          </div>
          <div class="mt-4 flex justify-between items-center flip-actions">
            <div>
              <div *ngIf="widgetData.content.sourceName" class="ws-mat-primary-text mat-subheading-1 source-name"
                i18n-title title="Source">
                {{ widgetData.content.sourceName }}
              </div>
              <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level" class="text-gray-600">
                {{ widgetData.content.complexityLevel }}
              </div>
            </div>
            <div class="flex">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" (click)="isCardFlipped = !isCardFlipped" mat-icon-button aria-label="action items">
                <mat-icon>flip_to_front</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </ng-container>
    </div>
  </mat-card>
</ng-template>
<ng-template #rating>
  <div class="flex items-center mr-2">
    <mat-icon class="mr-1" *ngIf="widgetData?.content?.averageRating == 5" color="accent">star</mat-icon>
    <mat-icon class="mr-1" *ngIf="widgetData?.content?.averageRating && widgetData.content.averageRating != 5"
      color="accent">star_half</mat-icon>
    <mat-icon class="mr-1" *ngIf="!widgetData?.content?.averageRating">star_border</mat-icon>
    <span>{{ widgetData?.content?.averageRating | number: '1.1-1' }}</span>
  </div>
</ng-template>

<ng-template #cardBasicInformation>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-basic-infomartion-container mr-6"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="rounded-t"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
        <!-- <ng-container *ngIf="widgetData.content?.completionStatus == 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
              [contentId]="widgetData.content?.identifier" [progress]="100"
              [progressType]="'percentage'">
            </ws-widget-content-progress>
          </ng-container>
          <ng-container *ngIf="widgetData.content?.completionStatus < 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
          </ng-container> -->
      </a>

      <mat-card-content class="m-small">
        <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
          i18n-aria-label>
          <div class="ws-mat-primary-background text-truncate px-4 py-2 -mx-4 text-white">
            <span *ngIf="widgetData.content?.complexityLevel">{{
              widgetData.content?.complexityLevel
              }}</span>

            <span i18n *ngIf="widgetData.content?.subTitle">
              |
            </span>
            <span matTooltipPosition="right" [matTooltip]="widgetData.content?.subTitle">
              {{ widgetData.content?.subTitle }}
            </span>
          </div>
          <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div>
          <div class="h-5">
            <div *ngIf="showContentTag && widgetData.contentTags && widgetData.contentTags.tag" i18n
              class="mode-tag px-2 ws-mat-primary-background">
              {{ widgetData.contentTags.tag }}
            </div>
          </div>
        </a>
      </mat-card-content>
      <div class="flex justify-between items-center">
        <img alt="source img" [src]="widgetData.content.sourceIconUrl" *ngIf="widgetData.content.sourceIconUrl"
          class="source-image mr-1" />
        <div *ngIf="widgetData.content.sourceName" class="source-name w-64 text-truncate" i18n-title title="Source">
          {{ widgetData.content.sourceName }}
        </div>
        <button type="button" mat-icon-button i18n-aria-label aria-label="action items" [matMenuTriggerFor]="cardMenu">
          <mat-icon>more_vertical</mat-icon>
        </button>
      </div>
    </div>
  </mat-card>
</ng-template>
<ng-template #cardDescriptionBack>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-Client-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="rounded-t" role="link"
          aria-label="Content" i18n-aria-label="Content | Click to view">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
            [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
            [title]="widgetData.content.name" />
        </a>
        <button class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button (click)="isCardFlipped = true"
          aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>
        <ng-container *ngIf="widgetData.content?.completionStatus == 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="100" [progressType]="'percentage'">
          </ws-widget-content-progress>
        </ng-container>
        <ng-container *ngIf="widgetData.content?.completionStatus < 2">
          <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
        </ng-container>
        <mat-card-content>
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
            i18n-aria-label>
            <div class="text-gray-600 complexity flex-middle">
              <mat-icon matTooltip="{{ imageIcon[1] }}">{{ imageIcon[0] }}</mat-icon>

              <div class="ws-mat-primary-text pl-2 text-lg title-text margin-bottom-xs margin-top-xs">
                {{ widgetData.content.name }}
              </div>
              <!-- <mat-icon>check_circle_outline</mat-icon> -->
            </div>
            <div class="text-gray-600 duration flex-between flex-center pb-1">
              <div *ngIf="widgetData.content.duration" i18n-title title="Duration" class="overflow-hidden">
                {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
              </div>
              <div *ngIf="widgetData.content.viewCount && widgetData.content.viewCount.Client" class="duration-time"
                i18n-title title="View Count">
                {{ widgetData.content.viewCount.Client | pipeCountTransform }} views
              </div>
              <div *ngIf="!widgetData.content.viewCount || !widgetData.content.viewCount.Client" class="duration-time"
                i18n-title title="View Count">
                No views
              </div>
              <div *ngIf="widgetData.content.resourceType" class="resource-type" i18n-title title="resource Type">
                {{ widgetData.content.resourceType }}
              </div>
            </div>

            <!-- <mat-chip-list>
              <mat-chip color="accent" selected>
                OnBoarding
              </mat-chip>
            </mat-chip-list> -->
          </a>
          <mat-divider></mat-divider>
          <div class="flex flex-middle">
            <ws-widget-btn-content-share [widgetData]="widgetData.content"></ws-widget-btn-content-share>
            <!-- <ws-widget-btn-content-like [color]="'primary'" class="flex items-center"
              [widgetData]="widgetData.content | pipePartialContent: ['identifier']" [likesCount]="widgetData.likes">
            </ws-widget-btn-content-like> -->

            <ws-widget-btn-playlist *ngIf="btnPlaylistConfig" [widgetData]="btnPlaylistConfig">
            </ws-widget-btn-playlist>
            <ws-widget-btn-content-download [widgetData]="
                widgetData.content
                  | pipePartialContent
                    : [
                        'identifier',
                        'contentType',
                        'resourceType',
                        'mimeType',
                        'downloadUrl',
                        'isExternal',
                        'artifactUrl'
                      ]
              "></ws-widget-btn-content-download>

            <mat-icon class="px-2 cursor-pointer" aria-label="Comment" i18n-aria-label matTooltip="Comment"
              i18n-matTooltip="Comment Button" [routerLink]="(widgetData.content | pipeContentRoute).url"
              [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [fragment]="'discussion-forum'">
              comment</mat-icon>
          </div>
        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>Description</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-description-trim mat-body-1">
          {{ widgetData.content.description }}
        </p>
      </ng-container>
    </div>
  </mat-card>
</ng-template>
<ng-template #cardBasicDetails>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-standard-container mr-6"
    [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData" role="link" class="rounded-t"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" class="card-img ws-mat-primary-lite-background"
          [wsUtilsDefaultThumbnail]="defaultThumbnail" [alt]="widgetData.content.name"
          [title]="widgetData.content.name" />
      </a>
      <mat-card-content>
        <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData" role="link" aria-label="Content"
          i18n-aria-label>
          <div class="text-gray-600 complexity flex-between flex-center">
            <div *ngIf="widgetData.content.duration" class="duration" i18n-title title="Duration">
              {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </div>
          </div>
          <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div>
          <div class="description-text ws-mat-text-block-fade-gradient mb-4" i18n-title title="Description">
            {{ widgetData.content.description | pipeHtmlTagRemoval }}
          </div>
          <div class="text-gray-600 complexity flex-end">
            <div class="flex items-center">
              <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" mat-icon-button i18n-aria-label aria-label="action items"
                [matMenuTriggerFor]="cardMenu">
                <mat-icon>more_vertical</mat-icon>
              </button>
            </div>
          </div>
        </a>
      </mat-card-content>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardDiscussion>
  <mat-card [attr.name]="'widget-card-content ' + widgetData.content.name" class="card-discussions-container mr-6"
    [ngClass]="{
        greyOut:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
          disableClick:
            widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
              ? true
              : widgetData?.intranetMode === 'greyOut' && showIntranetContent
        }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <mat-card-content>

        <!-- <div class="text-gray-600 complexity flex-between flex-center">
            <div *ngIf="widgetData.content.duration" class="duration" i18n-title title="Duration">
              {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </div>
          </div> -->
        <!-- <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div> -->
        <div class="flex flex-1 flex-row">
          <div class="flex-9 description-text mb-4" i18n-title title="Description">
            <a (click)="raiseTelemetry()" [routerLink]="['/app/discuss']" class="flex flex-column"
              [queryParams]="{'disid':'abc-bcdf-mnj-llk'}" role="link" aria-label="Content" i18n-aria-label>
              <h2 class="ws-mat-primary-text mat-title title-text"> {{ widgetData.content.name }}</h2>
            </a>
          </div>
          <div class="flex flex-1">
            <div class="ws-mat-default-text">
              <span>{{5}} hours ago</span>
            </div>
          </div>
        </div>
        <div class="flex flex-1 flex-row">
          <div class="flex-9 description-text mb-4" i18n-title title="Description">
            Asked by <a (click)="raiseTelemetry()" [routerLink]="['/app/person-profile']"
              [queryParams]="{'emailId':'amit.sengar@tarento.com'}" role="link" aria-label="Content" i18n-aria-label>
              <span class="ws-mat-default-text">{{'Amit Kumar'}}</span>
            </a>
          </div>
          <div class="flex flex-1">
            <div class="typeofc">
              <span>Law</span>
            </div>
          </div>
        </div>
        <!-- <mat-accordion>
          <mat-expansion-panel class="no-box" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header #panelH (click)="panelH._toggle()">
              <mat-panel-title> -->
        <div class="flex flex-1 flex-row">
          <div class="flex flex-1">
            <div class="flex flex-1 flex-row">
              <span>
                <mat-icon class="ws-mat-warn-text">thumb_up_off_alt</mat-icon>
              </span>
              &nbsp;
              <h3 class="ws-mat-warn-text">{{21}}</h3>
              &nbsp;
              &nbsp;
              <span>
                <mat-icon class="ws-mat-primary-text">reply</mat-icon>
              </span>
              &nbsp;
              <h3 class="ws-mat-warn-text">Reply</h3>
            </div>
          </div>
          <div class="flex flex-1 center-right">
            <span>view {{2}} replies
              <!-- <mat-icon>keyboard_arrow_up </mat-icon> -->
            </span>
          </div>
        </div>
        <!-- </mat-panel-title>
              <mat-panel-description>
                <span class="flex flex-1 center-right" (click)="panelH._toggle()">view {{2}} replies</span>
              </mat-panel-description>
            </mat-expansion-panel-header>
            <div>
              <p>I'm visible because I am open</p>
            </div>
          </mat-expansion-panel>
        </mat-accordion> -->


      </mat-card-content>
    </div>
  </mat-card>
</ng-template>


<ng-template #cardStandard>
  <mat-card class="card-standard-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <!-- <ws-widget-content-progress
      class="progress-bar"
      *ngIf="widgetData.content?.identifier"
      [contentId]="widgetData.content?.identifier"
    ></ws-widget-content-progress> -->
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute: forPreview ).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <!-- <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="rounded-t" role="link"
          aria-label="Content" i18n-aria-label="Content | Click to view"> -->
        <div style="position: relative; z-index: 1;">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy" style="position: absolute; z-index: 2;"
            class="card-img ws-mat-primary-lite-background" [wsUtilsDefaultThumbnail]="defaultThumbnail"
            [alt]="widgetData.content.name" />

            <!-- image overlay box-->
            <div class="course_logo_box">
              <img [src]="widgetData.content.creatorLogo | pipePublicURL " class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
              <!-- <p class="mat-subheading-1 margin-remove">IGOT</p> -->
            </div>
          <div class="source-div" style="display: none;">
            <!-- [src]="sourseIcon(widgetData.content.sourceName)" -->
            <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            <!-- [title]="widgetData.content.sourceName" -->
          </div>
        </div>
        <!-- </a> -->
        <button *ngIf="showFlip" class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button
          (click)="isCardFlipped = true" aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>


        <mat-card-content class="min-top">
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute : forPreview).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>

            <div class="text-gray-time complexity flex-between flex-center">
              <!-- <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level">
                {{ widgetData.content.complexityLevel }}
              </div> -->
              <div *ngIf="showIsMode" i18n i18n-title title="Newly Added"
                class="mode-tag px-2 ws-mat-accent-background">
                Newly Added
              </div>
              <!-- <div *ngIf="widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div> -->
              <!-- <div *ngIf="!widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">0.0m</span>
              </div> -->
            </div>

            <div class="course_widget">
              <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
              <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                class="ws-mat-black60-text font-normal mat-caption text-uppercase" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
                ?'Module'
                :widgetData.content?.primaryCategory">

              </ws-widget-display-content-type>
            </div>

            <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              {{ widgetData.content.name }}
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-2">
              {{ widgetData.content.description | pipeHtmlTagRemoval }}

              <!-- {{widgetData.content | json}} -->
              <!-- {{widgetData.content.sourceName}} -->
            </div>
            <div class="mat-body-2  mb-5" *ngIf="widgetData?.content?.batch?.endDate">
              Deadline : {{ widgetData?.content?.batch?.endDate | date: "d MMM yyyy" }}
            </div>
          </a>
          <div class="mt-4 mb-2 flex justify-between items-center absolute bottom-0 left-0 right-0 px-3 py-2">
            <!-- <ws-widget-display-content-type
              i18n-title
              title="Content Type"
              *ngIf="widgetData.content?.displayContentType"
              class="ws-mat-primary-text font-normal"
              [displayContentType]="widgetData.content?.displayContentType"
            >
            </ws-widget-display-content-type> -->

              <!-- <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
              class="ws-mat-primary-text font-normal" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
              ?'Module'
              :widgetData.content?.primaryCategory">
            </ws-widget-display-content-type> -->

            <div class="flex flex-row justify-between w-full">
              <div *ngIf="widgetData.content.duration" class="duration flex ">
                <!-- <mat-icon>access_time</mat-icon> -->
                <span class="time-text ws-mat-black60-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div>

              <div *ngIf="widgetData.content?.completionStatus == 2" class="flex">
                <p class="margin-remove-bottom">100%</p>
              </div>
              <div *ngIf="widgetData.content?.completionStatus < 2" class="flex">
                <p class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p>
                <!-- <p *ngIf="widgetData.content?.completionPercentage > 0" class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p> -->
              </div>


            </div>
              <!-- <div *ngIf="!widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">0.0m</span>
              </div> -->

            <div class="flex items-center">
              <!-- <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" mat-icon-button i18n-aria-label [matMenuTriggerFor]="cardMenu">
                <mat-icon>more_vertical</mat-icon>

              </button> -->
              <!-- <mat-icon class="mat-icon ws-mat-black60-text">share</mat-icon> -->
            </div>
          </div>
          <ng-container *ngIf="widgetData.content?.completionStatus == 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
              [contentId]="widgetData.content?.identifier" [progress]="100"
              [progressType]="'percentage'">
            </ws-widget-content-progress>
          </ng-container>
          <ng-container *ngIf="widgetData.content?.completionStatus < 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
          </ng-container>

        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>Reason</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-justify mat-body-1">
          {{ widgetData.content.reason }}
        </p>
      </ng-container>


      </a>
    </div>
  </mat-card>
</ng-template>

<ng-template #cardStandardGoals>
  <mat-card class="card-standard-container goals mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <!-- <ws-widget-content-progress
      class="progress-bar"
      *ngIf="widgetData.content?.identifier"
      [contentId]="widgetData.content?.identifier"
    ></ws-widget-content-progress> -->
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <ng-container *ngIf="!isCardFlipped">
        <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
          matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
        <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
          matTooltip="Available only in Company's network"
          *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
        <!-- <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
          [queryParams]="(widgetData.content | pipeContentRoute).queryParams" class="rounded-t" role="link"
          aria-label="Content" i18n-aria-label="Content | Click to view"> -->
        <div style="position: relative; z-index: 1;">
          <img mat-card-image [src]="widgetData.content.posterImage | pipePublicURL" loading="lazy" style="position: absolute; z-index: 2;"
            class="card-img ws-mat-primary-lite-background" [wsUtilsDefaultThumbnail]="defaultThumbnail"
            [alt]="widgetData.content.name" />

            <!-- image overlay box-->
            <div class="course_logo_box">
              <img [src]="widgetData.content.creatorLogo | pipePublicURL" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
              <!-- <p class="mat-subheading-1 margin-remove">IGOT</p> -->
            </div>
          <div class="source-div" style="display: none;">
            <!-- [src]="sourseIcon(widgetData.content.sourceName)" -->
            <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
              [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
            <!-- [title]="widgetData.content.sourceName" -->
          </div>
        </div>
        <!-- </a> -->
        <button *ngIf="showFlip" class="detail-button ws-mat-primary-lite-background-op30" mat-icon-button
          (click)="isCardFlipped = true" aria-label="Details" i18n-aria-label="Details | Click to see details">
          <mat-icon>flip_to_back</mat-icon>
        </button>


        <mat-card-content class="min-top">
          <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
            [queryParams]="(widgetData.content | pipeContentRoute).queryParams" [state]="widgetData?.stateData"
            role="link" i18n-aria-label>

            <div class="text-gray-time complexity flex-between flex-center">
              <!-- <div *ngIf="widgetData.content.complexityLevel" i18n-title title="Complexity Level">
                {{ widgetData.content.complexityLevel }}
              </div> -->
              <div *ngIf="showIsMode" i18n i18n-title title="Newly Added"
                class="mode-tag px-2 ws-mat-accent-background">
                Newly Added
              </div>
              <!-- <div *ngIf="widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div> -->
              <!-- <div *ngIf="!widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">0.0m</span>
              </div> -->
            </div>

            <div class="course_widget">
              <mat-icon class="mat-icon main_icon  ws-mat-default-text margin-right-xs">video_library</mat-icon>
              <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
                class="ws-mat-black60-text font-normal mat-caption text-uppercase" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
                ?'Module'
                :widgetData.content?.primaryCategory">

              </ws-widget-display-content-type>
            </div>

            <div [id]="'m-c-'+ widgetData.content?.identifier"
              class="mat-subheading-1 title-text ws-mat-text-block-fade-gradient">
              {{ widgetData.content.name }}
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-10">
              {{ widgetData.content.description | pipeHtmlTagRemoval }}

              <!-- {{widgetData.content | json}} -->
              <!-- {{widgetData.content.sourceName}} -->
            </div>
            <div class="mat-body-2 ws-mat-primary-text description-text ws-mat-text-block-fade-gradient mb-10">
              End date : {{ widgetData?.batch?.end | date: "MMM yyyy" }}
            </div>
          </a>
          <div class="mt-4 mb-2 flex justify-between items-center absolute bottom-0 left-0 right-0 px-3 py-2">
            <!-- <ws-widget-display-content-type
              i18n-title
              title="Content Type"
              *ngIf="widgetData.content?.displayContentType"
              class="ws-mat-primary-text font-normal"
              [displayContentType]="widgetData.content?.displayContentType"
            >
            </ws-widget-display-content-type> -->

              <!-- <ws-widget-display-content-type i18n-title title="Content Type" *ngIf="widgetData.content?.primaryCategory"
              class="ws-mat-primary-text font-normal" [displayContentType]="widgetData.content?.primaryCategory==='Course Unit'
              ?'Module'
              :widgetData.content?.primaryCategory">
            </ws-widget-display-content-type> -->

            <div class="flex flex-row justify-between w-full">
              <div *ngIf="widgetData.content.duration" class="duration flex ">
                <!-- <mat-icon>access_time</mat-icon> -->
                <span class="time-text ws-mat-black60-text">{{ widgetData.content.duration | pipeDurationTransform: 'hms' }}</span>
              </div>

              <div *ngIf="widgetData.content?.completionStatus == 2" class="flex">
                <p class="margin-remove-bottom">100%</p>
              </div>
              <div *ngIf="widgetData.content?.completionStatus < 2" class="flex">
                <p class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p>
                <!-- <p *ngIf="widgetData.content?.completionPercentage > 0" class="margin-remove-bottom"> {{ widgetData.content?.completionPercentage }} %</p> -->
              </div>


            </div>
              <!-- <div *ngIf="!widgetData.content.duration" class="duration">
                <mat-icon>access_time</mat-icon>
                <span class="time-text">0.0m</span>
              </div> -->

            <div class="flex items-center">
              <!-- <ng-container [ngTemplateOutlet]="rating"></ng-container>
              <button type="button" mat-icon-button i18n-aria-label [matMenuTriggerFor]="cardMenu">
                <mat-icon>more_vertical</mat-icon>

              </button> -->
              <!-- <mat-icon class="mat-icon ws-mat-black60-text">share</mat-icon> -->
            </div>
          </div>
          <ng-container *ngIf="widgetData.content?.completionStatus == 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
              [contentId]="widgetData.content?.identifier" [progress]="100"
              [progressType]="'percentage'">
            </ws-widget-content-progress>
          </ng-container>
          <ng-container *ngIf="widgetData.content?.completionStatus < 2">
            <ws-widget-content-progress class="progress-bar" *ngIf="widgetData.content?.identifier"
            [contentId]="widgetData.content?.identifier" [progress]="widgetData.content?.completionPercentage"
            [progressType]="'percentage'">
          </ws-widget-content-progress>
          </ng-container>

        </mat-card-content>
      </ng-container>
      <ng-container *ngIf="isCardFlipped">
        <div class="flex items-center">
          <h2 class="mat-subheading-2 flex-1 min-w-0 margin-remove-bottom" i18n>Reason</h2>
          <button mat-icon-button (click)="isCardFlipped = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <p class="text-justify mat-body-1">
          {{ widgetData.content.reason }}
        </p>
      </ng-container>



    </div>
  </mat-card>
</ng-template>

<ng-template #cardWide>
  <mat-card class="card-wide margin-bottom-m padding-remove position-relative flex">
    <div class="imageholder ">
      <img mat-card-image class="margin-remove"
      [src]="widgetData.content.posterImage || widgetData.content.appIcon  | pipePublicURL" [wsUtilsDefaultThumbnail]="defaultThumbnail"
      [alt]="widgetData.content.name">
      <div class="source-div" [hidden]="true">
        <!-- [src]="sourseIcon(widgetData.content.sourceName)" -->
        <img [src]="widgetData.content.creatorLogo" class="source-icon" [wsUtilsDefaultThumbnail]="defaultSLogo"
          [alt]="(widgetData.content.sourceName + '_' + widgetData.content.identifier)" />
        <!-- [title]="widgetData.content.sourceName" -->
      </div>
    </div>
    <mat-card-content class="mat-text-box">
      <p class="flex items-center mat-caption margin-bottom-xxs text-uppercase" *ngIf="widgetData.content.contentType === 'Resource' || widgetData.content.contentType === 'Course' || widgetData.content.contentType === 'Module'">

        <!-- <img src="/assets/icons/content/audio.svg" class="contenticon" alt="Audio"  *ngIf="widgetData.content.mimeType === 'audio/mpeg'"> -->
        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Audio" *ngIf="widgetData.content.mimeType === 'audio/mpeg'">
          mic</mat-icon>

        <!-- <img src="/assets/icons/content/assessment.svg" class="contenticon" alt="Assessment"  *ngIf="widgetData.content.mimeType === 'application/json' || widgetData.content.mimeType === 'application/quiz'"> -->
        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Assessment" *ngIf="widgetData.content.mimeType === 'application/json' || widgetData.content.mimeType === 'application/quiz'">
          assessment</mat-icon>

        <!-- <img src="/assets/icons/content/pdf.svg" alt="PDF" class="contenticon" *ngIf="widgetData.content.mimeType === 'application/pdf'"> -->
        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="PDF" *ngIf="widgetData.content.mimeType === 'application/pdf'">
          picture_as_pdf</mat-icon>

        <!-- <img src="/assets/icons/content/video.svg" alt="Video" class="contenticon"  *ngIf="widgetData.content.mimeType === 'video/mp4' || widgetData.content.mimeType === 'video/x-youtube' || widgetData.content.mimeType === 'application/x-mpegURL'"> -->
        <mat-icon  class="mat-icon ws-mat-default-text margin-right-xs" alt="Video" *ngIf="widgetData.content.mimeType === 'video/mp4' || widgetData.content.mimeType === 'video/x-youtube' || widgetData.content.mimeType === 'application/x-mpegURL'">
          videocam</mat-icon>

        <!-- <img src="/assets/icons/content/collection.svg" class="contenticon" alt="Course"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.content-collection'"> -->
        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Course"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.content-collection'">
          video_library
        </mat-icon>

        <!-- <img src="/assets/icons/content/link.svg" class="contenticon" alt="HTML"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.html-archive' || widgetData.content.mimeType === 'application/vnd.ekstep.ecml-archive' || widgetData.content.mimeType === 'text/x-url'"> -->
        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="HTML"  *ngIf="widgetData.content.mimeType === 'application/vnd.ekstep.html-archive' || widgetData.content.mimeType === 'application/vnd.ekstep.ecml-archive' || widgetData.content.mimeType === 'text/x-url'">
          attachment
        </mat-icon>

        <!-- <img src="/assets/icons/content/image.svg" class="contenticon" alt="Module"  *ngIf="widgetData.content.mimeType === 'image/jpeg' || widgetData.content.mimeType === 'image/png'"> -->
        <mat-icon class="mat-icon main_icon ws-mat-default-text margin-right-xs" alt="Module"  *ngIf="widgetData.content.mimeType === 'image/jpeg' || widgetData.content.mimeType === 'image/png'">
          image
        </mat-icon>
        {{widgetData.content.primaryCategory || widgetData.content.contentType}}
      </p>
      <div class="flex main_title_box">
        <p class="mat-subheading-1 margin-bottom-xs font-bold-imp cursor-pointer content-title">
          <a [routerLink]="['/app/toc/',widgetData.content.identifier,'overview']"
            [queryParams]="{primaryCategory: widgetData.content.primaryCategory}" [state]="widgetData?.stateData">
            {{widgetData.content.name}}
          </a>
      </p>
      </div>
      <!-- <p class="mat-body-2 margin-bottom-s"></p> -->
      <div class="bottomsection">
        <p class="mat-body-2 ws-mat-black-text margin-bottom-xxs" *ngIf="widgetData.content.creator">By {{widgetData.content.creator}}</p>
        <div class="contentdata margin-bottom-xm">
          <ul
            class="mat-body-2 margin-remove-top margin-bottom-xs padding-remove ws-mat-black60-text highlighting_list">
            <!-- <li>Health social science</li> -->
            <li *ngIf="widgetData.content.lastUpdatedOn">
              <!-- <img src="/assets/icons/content/separator.svg" class="text_seperator"> -->
                {{ widgetData.content.lastUpdatedOn | date: "MMM yyyy"  }}
            </li>
            <li *ngIf="widgetData.content.duration">
                <img class="text_seperator" src="/assets/icons/content/separator.svg">  {{ widgetData.content.duration | pipeDurationTransform: 'hms' }}
            </li>
            <!-- TODO: Rating have to enabled once data is available -->
            <!-- <li class="rating"><img src="/assets/icons/content/separator.svg" class="text_seperator">
              <span class="rating-number mat-body-2"> 4.5 &nbsp;</span>
              <mat-icon>star</mat-icon>
              <mat-icon>star</mat-icon>
              <mat-icon>star</mat-icon>
              <mat-icon>star</mat-icon>
              <mat-icon>star_half</mat-icon>
            </li> -->
          </ul>
        </div>
        <!-- <div class="flex"> -->
          <div *ngIf="widgetData?.content?.batch?.endDate">
            <p>Deadline - {{widgetData.content.batch?.endDate | date: "d MMM yyyy"}}</p>
          </div>
          <div class="tags" *ngIf="widgetData.content.keywords && widgetData.content.keywords.length > 0">
            <ul class="mat-caption margin-remove-top padding-remove tag_list">
              <li *ngFor="let tag of widgetData.content.keywords">
                <span class="tag">{{tag}}</span>
              </li>
            </ul>
          </div>
          <!-- <div class="flex-col">
            <p class="display-inline-block ws-mat-black60-text actionbtns">
              <mat-icon class="margin-right-s">playlist_add</mat-icon>
              <mat-icon>more_vert_outlined</mat-icon>

            </p>
          </div> -->
        <!-- </div> -->

      </div>
    </mat-card-content>
  </mat-card>
</ng-template>

<!-- <ng-template #cardWithUserDetails>
  <mat-card [attr.name]="'widget-card-content ' + widgetData?.content?.name"
    class="card-with-user-details-container mr-6" [ngClass]="{
      greyOut:
        widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
          ? true
          : widgetData?.intranetMode === 'greyOut' && showIntranetContent
    }" (click)="(showIntranetContent || !isLiveOrMarkForDeletion) && showSnackbar()">
    <div class="display-contents" [ngClass]="{
        disableClick:
          widgetData.deletedMode === 'greyOut' && !isLiveOrMarkForDeletion
            ? true
            : widgetData?.intranetMode === 'greyOut' && showIntranetContent
      }">
      <div class="status-danger" role="note" i18n-aria-label aria-label="Content expired or deleted" i18n-matTooltip
        matTooltip="Content may be expired or deleted" *ngIf="!isLiveOrMarkForDeletion"></div>
      <div class="status-danger" role="note" i18n-aria-label aria-label="Intranet content" i18n-matTooltip
        matTooltip="Available only in Company's network"
        *ngIf="widgetData?.intranetMode === 'greyOut' && showIntranetContent"></div>
      <a (click)="raiseTelemetry()" [routerLink]="(widgetData.content | pipeContentRoute).url"
        [queryParams]="(widgetData.content | pipeContentRoute).queryParams" role="link" class="rounded-t"
        aria-label="Content" i18n-aria-label="Content | Click to view">
        <div *ngIf="
            widgetData?.content?.creatorDetails?.length ||
            widgetData?.content?.creatorContacts?.length
          " class="flex flex-wrap items-center mb-4">
          <ws-widget-user-image class="author-image" [userName]="
              widgetData?.content?.creatorDetails && (widgetData.content?.creatorDetails)[0]?.name
                ? (widgetData?.content?.creatorDetails)[0]?.name
                : (widgetData?.content?.creatorContacts)[0]?.name
            " [userId]="
              widgetData?.content?.creatorDetails && (widgetData.content?.creatorDetails)[0]?.id
                ? (widgetData?.content?.creatorDetails)[0]?.id
                : (widgetData?.content?.creatorContacts)[0]?.id
            " [imageType]="'name-initial'"></ws-widget-user-image>
          <div class="width-expand">
            <div class="margin-remove font-semibold text-truncate">
              {{
                widgetData.content?.creatorDetails && (widgetData.content?.creatorDetails)[0].name
                  ? (widgetData.content?.creatorDetails)[0]?.name === 'null null'
                    ? 'Not disclosed'
                    : (widgetData.content?.creatorDetails)[0]?.name
                  : (widgetData.content?.creatorContacts)[0]?.name === 'null null'
                  ? 'Not disclosed'
                  : (widgetData.content?.creatorContacts)[0]?.name
              }}
              {{ checkDisplayName }}
            </div>
          </div>
        </div>

        <img mat-card-image [src]="widgetData?.content?.appIcon" class="card-img ws-mat-primary-lite-background"
          [ngClass]="{ 'greyed-img': isGreyedImage }" [wsUtilsDefaultThumbnail]="defaultThumbnail"
          [alt]="widgetData?.content?.name" [title]="widgetData.content.name" />
        <ws-widget-content-progress class="progress-bar" *ngIf="widgetData?.content?.identifier"
          [contentId]="widgetData?.content?.identifier" [progress]="widgetData?.content?.progress">
        </ws-widget-content-progress>
      </a>
      <mat-card-content>
        <a (click)="raiseTelemetry()" [routerLink]="(widgetData?.content | pipeContentRoute).url"
          [queryParams]="(widgetData?.content | pipeContentRoute).queryParams" role="link" aria-label="Content"
          i18n-aria-label>
          <div *ngIf="widgetData?.content?.resourceType || widgetData?.content?.contentType"
            class="back-color px-4 py-2 -mx-4 text-white">
            <ws-widget-display-content-type i18n-title title="Content Type"
              *ngIf="widgetData?.content?.displayContentType" class="font-normal text-xs"
              [displayContentType]="widgetData.content?.displayContentType">
            </ws-widget-display-content-type>
          </div>
          <div class="ws-mat-primary-text mat-title title-text title-truncate">
            {{ widgetData.content.name }}
          </div>
        </a>
      </mat-card-content>
      <div class="flex items-center justify-between flex-row-reverse space-0 mb-0">
        <ws-widget-btn-content-like [color]="'primary'" class="flex items-center"
          [widgetData]="widgetData?.content | pipePartialContent: ['identifier']" [likesCount]="widgetData?.likes">
        </ws-widget-btn-content-like>

        <div *ngIf="showContentTag || false" i18n class="mode-tag px-2 ws-mat-primary-background">
          {{ widgetData.contentTags.tag }}
        </div>
      </div>
    </div>
  </mat-card>
</ng-template> -->
