<div class="main_container flex flex-row"
  style=" background: url(assets/instances/eagle/banners/home/9/Login_background.png) no-repeat center center fixed;">
  <div class="left_container flex flex-col items-center justify-center mt-8">
    <div class="logo_box flex items-center">
      <img src="/assets/instances/eagle/app_logos/dopt_logo.png" alt="logo" class="logo_img">
    </div>

    <div class="slideshow-container">

      <div class="mySlides">
        <img src="/assets/instances/eagle/app_logos/Hexagon.png" alt="karmayogi">
        <!-- <img src="/assets/instances/eagle/app_logos/card3.png" alt="slide 1"> -->

      </div>

      <!-- <div class="mySlides">

        <img src="/assets/instances/eagle/app_logos/Hexagon.png" alt="slide 2">

      </div> -->







    </div>
    <br>

    <!-- <div style="text-align:center">
        <span class="dot"></span>
        <span class="dot"></span>

      </div> -->
  </div>
  <div class=" right_container flex flex-col items-center justify-center py-16">
    <div class="right_inner_container profile-box">
      <div class="flex">
        <div class="flex items-center mr-5">
          <a class=" ng-star-inserted" [routerLink]="'/static-home'" tabindex="0" aria-disabled="false">
            <span class="flex">
              <mat-icon class="mat-icon notranslate material-icons ws-mat-primary-text" role="img" aria-hidden="true">
                arrow_back
              </mat-icon>
            </span>
          </a>
        </div>
        <h1 class="mat-h1 margin-remove inline-block ng-star-inserted">
          Register
        </h1>
      </div>
      <form [formGroup]="registrationForm">
        <div class="margin-top-l new-mobile">
          <div class="flex flex-wrap mobile-break">
            <div class="flex flex-col content-center flex-wrap">
              <div class="input-wrapper margin-top-s">
                <label for="firstName" class=" margin-remove-bottom form-label required"
                  i18n="First name label|Label which explains the user to enter first name" i18n-aria-label
                  aria-label="First name label">
                  First name
                </label>
                <mat-form-field appearance="outline" class="margin-top-s">
                  <input id="firstName" matInput #firstname formControlName="firstname" i18n-placeholder
                    placeholder="Enter your first name" autocomplete="off" i18n-aria-label aria-label="First Name input" maxlength="150" />
                  <mat-error [hidden]="false" i18n="First Name Error|Explains name is required" i18n-aria-label
                    aria-label="First Name Error|Explains name is required "
                    *ngIf="registrationForm?.controls['firstname'].errors?.required">
                    First name is mandatory
                  </mat-error>
                  <mat-error [hidden]="false" *ngIf="registrationForm?.controls['firstname'].errors?.pattern"
                    i18n-aria-label
                    aria-label="First name Error|Name fields cannot contain numbers and special characters except ">
                    Name fields cannot contain numbers and special characters except '
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="input-wrapper margin-top-s">
                <label for="lastName" class=" margin-remove-bottom form-label required"
                  i18n="Surname label|Label which explains the user to enter Surname" i18n-aria-label
                  aria-label="Last name label">
                  Surname
                </label>
                <mat-form-field appearance="outline" class="margin-top-s">
                  <input id="lastName" autocomplete="off" matInput #lastname formControlName="lastname" i18n-placeholder
                    placeholder="Enter your surname" i18n-aria-label aria-label="Last name input" maxlength="150" />
                  <mat-error [hidden]="false" i18n="Surname Error|Explains name is required"
                    *ngIf="registrationForm?.controls['lastname'].errors?.required" i18n-aria-label
                    aria-label="Surname is mandatory">
                    Surname is mandatory
                  </mat-error>
                  <mat-error [hidden]="false" *ngIf="registrationForm?.controls['lastname'].errors?.pattern"
                    i18n-aria-label aria-label="Surname fields cannot contain numbers and special characters except '">
                    Surname fields cannot contain numbers and special characters except '
                  </mat-error>
                </mat-form-field>
              </div>
              <!-- <div class="input-wrapper margin-top-s">
                <label for="designation" class=" margin-remove-bottom form-label required"
                  i18n="designation label|Label which explains the user to enter designation" i18n-aria-label
                  aria-label="Designation label">
                  Designation
                </label>
                <mat-form-field appearance="outline" class="margin-top-s">
                  <input id="designation" matInput #designation formControlName="designation" i18n-placeholder
                    placeholder="Enter designation" i18n-aria-label aria-label="designation input" />
                  <mat-error [hidden]="false" i18n="designation Error|Explains name is required"
                    *ngIf="registrationForm?.controls['designation'].errors?.required" i18n-aria-label
                    aria-label="designation is mandatory">
                    Designation is mandatory
                  </mat-error>
                  <mat-error [hidden]="false" *ngIf="registrationForm?.controls['designation'].errors?.pattern"
                    i18n-aria-label aria-label="Name fields cannot contain numbers and special characters except '">
                    Designation cannot contain numbers and special characters except '
                  </mat-error>
                </mat-form-field>
              </div> -->
              <div class="input-wrapper margin-top-s">
                <label for="position" class=" margin-remove-bottom form-label required"
                  i18n="Position|Label which explains the user to enter Position" i18n-aria-label
                  aria-label="Position Field label">
                  Position
                </label>
                <mat-form-field appearance="outline" class="margin-top-s w-full" id="position">
                  <input id="position" matInput tab-directive type="text" placeholder="Select your position"
                    i18n-placeholder="position" formControlName="position" [matAutocomplete]="positionAutocomplete"
                    i18n-aria-label aria-label="Position" #position i18n-aria-label aria-label="Position Field input" maxlength="50" />
                  <mat-error [hidden]="false" i18n="Position Error|Explains Position is required"
                    *ngIf="registrationForm?.controls['position'].errors?.required" i18n-aria-label
                    aria-label="Position is mandatory">
                    Position is mandatory
                  </mat-error>
                  <mat-error *ngIf="registrationForm?.controls['position'].errors?.forbiddenNames" i18n-aria-label
                    aria-label="You must enter value from suggested list only.">
                    You must enter value from suggested list only.
                  </mat-error>
                  <mat-hint class="pos-hint">Not finding your position?<span class="float-right blue-text font-bold" (click)="navigateTo('Position')">Request for help</span></mat-hint> 
                </mat-form-field>
                <mat-autocomplete #positionAutocomplete="matAutocomplete" autoActiveFirstOption="true" i18n-aria-label
                  aria-label="Position list masterPositions" [displayWith]="displayFnPosition">
                  <mat-option *ngFor="let option of masterPositions | async" [value]="option" i18n-aria-label
                    aria-label="Position list autocomplete option">
                    {{ option.name }}
                  </mat-option>

                  <mat-option class="custom bordered" *ngIf="(!masterPositions || !masterPositions?.length)" [value]="">
                    <ng-container [ngTemplateOutlet]="noResult" [ngTemplateOutletContext]="{type: 'Position'}">
                    </ng-container>
                  </mat-option>
                </mat-autocomplete>
              </div>
              <div class="input-wrapper margin-top-s">
                <label for="email" class=" margin-remove-bottom form-label required"
                  i18n="Email label|Label which explains the user to enter Email" i18n-aria-label
                  aria-label="Email label">
                  Email
                </label>
                <mat-form-field appearance="outline" class="margin-top-s">
                  <input id="email" name="emailField" autocomplete="off" type="email" maxlength="320" (input)="emailVerification($event.target.value)" matInput placeholder="Enter your email id" #email
                    formControlName="email" i18n-aria-label aria-label="Email input">
                  <mat-hint>Only government email ids are allowed</mat-hint>
                  <mat-error [hidden]="false" *ngIf="registrationForm?.controls['email'].errors?.required"
                    i18n="Email Error|Explains name is required">
                    Email id is mandatory
                  </mat-error>
                  <mat-error [hidden]="false" *ngIf="registrationForm?.controls['email'].errors?.pattern"
                    i18n-aria-label aria-label="Name fields cannot contain numbers and special characters except '">
                    Email id is not valid
                  </mat-error>
                  <div *ngIf="emailLengthVal" class="email-error"
                    i18n="Email Error|Explains character validation">
                    Max 64 characters before "@" & 255 characters after "@" are valid.
                  </div>
                </mat-form-field>
              </div>
              <div class="input-wrapper mobile-wrapper margin-top-l">
                <label for="mobileNumber" class=" margin-remove-bottom form-label required"
                  i18n="Mobile Number label|Label which explains the user to enter Mobile Number" i18n-aria-label
                  aria-label="Mobile Number label">
                  Mobile Number
                </label>
                <div class="flex flex-1">

                  <mat-form-field appearance="outline" class="margin-top-s w-full">
                    <!-- <input [readonly]="otpSend && !otpVerified" id="mobileNumber" #mobile type="number" matInput
                      placeholder="Mobile Number" formControlName="mobile" i18n-aria-label
                      aria-label="Mobile Number input" maxlength="12"> -->
                    <input  id="mobileNumber" #mobile type="number" matInput
                      placeholder="Mobile Number" formControlName="mobile" i18n-aria-label
                      aria-label="Mobile Number input" maxlength="12">
                    <mat-icon matSuffix class="ws-mat-green-text margin-xs" svgIcon="verified" [hidden]="!isMobileVerified"></mat-icon>
                    <mat-error [hidden]="false" i18n="Mobile Number Error|Explains Mobile no is required"
                      *ngIf="registrationForm?.controls['mobile'].errors?.required" i18n-aria-label
                      aria-label="Mobile Number is mandatory">
                      Mobile Number is mandatory
                    </mat-error>
                    <mat-error [hidden]="false" *ngIf="registrationForm?.controls['mobile'].errors?.pattern"
                      i18n-aria-label aria-label="Please enter a valid 10 digit mobile number">
                      Please enter a valid 10 digit mobile number
                    </mat-error>
                    <mat-hint align="start">Please add a valid mobile number</mat-hint>
                  </mat-form-field>
                </div>
                <div *ngIf="!isMobileVerified" class="flex flex-1 margin-top-s justify-end">
                  <button *ngIf="!otpSend" mat-raised-button type="button" (click)="sendOtp()"
                    class="submitBtnSmall text-white ws-mat-primary-background ws-mat-white-text btn-responsive" [disabled]="registrationForm?.mobile?.invalid">
                    <a class="text-white" i18n>
                      Send OTP
                    </a>
                  </button>
                  <div *ngIf="otpSend" class="flex flex-1 flex-column">
                    <!-- <div class="flex flex-1 flex-row"> -->
                      <mat-form-field appearance="outline" class="margin-top-xs w-full">
                        <input  id="mobileNumber" #otp type="password"
                          matInput placeholder="Enter OTP" i18n-aria-label aria-label="OTP input" onKeyPress="if(this.value.length === 8) return false;" autocomplete="new-password">
                        <mat-hint *ngIf="timeLeftforOTP > 0 ">
                          <span>Resend OTP after {{timeLeftforOTP | pipeDurationTransform: 'hms2M'}}</span>
                        </mat-hint>
                        <mat-hint *ngIf="timeLeftforOTP <= 0 ">
                          <span class="cursor-pointer ws-mat-default-text" (click)="resendOTP()">Resend
                            OTP</span>
                        </mat-hint>
                      </mat-form-field>
                      <div class="flex flex-1 margin-top-s justify-end">
                        <button mat-raised-button type="button" (click)="verifyOtp(otp)"
                          class="submitBtnSmall text-white ws-mat-primary-background ws-mat-white-text margin-top-s otp"
                          [disabled]="registrationForm?.mobile?.invalid">
                          <span class="text-white" i18n>
                            Verify OTP
                          </span>
                        </button>
                      </div>
                    <!-- </div> -->
                  </div>
                </div>
              </div>
              <div class="input-wrapper margin-top-m">
                <label for="type" class=" margin-remove-bottom form-label required"
                  i18n="Department|Label which explains the user to enter Department" i18n-aria-label
                  aria-label="Department Field label">
                  Center/State
                </label>
                <mat-radio-group #type class="margin-top-s" formControlName="type" i18n-aria-label
                  aria-label="Signup as">
                  <mat-radio-button class="mat-radio-button radio-select" [value]="'ministry'">
                    Center
                  </mat-radio-button>
                  <mat-radio-button class="mat-radio-button radio-unselect  margin-left-s" [value]="'state'">
                    State
                  </mat-radio-button>
                </mat-radio-group>
              </div>
              <div class="input-wrapper margin-top-s">
                <label for="organisation" class=" margin-remove-bottom form-label required"
                  i18n="Organisation label|Label which explains the user to enter Surname" i18n-aria-label
                  aria-label="Organisation label">
                  Organisation
                </label>
                <!-- <ng-container *ngIf="!hideOrg"> -->
                  <mat-form-field appearance="outline" class="margin-top-s  flex-1 full-width no-pb square outline-color" [hidden]="hideOrg">
                    <mat-icon matPrefix class="search-home flex items-center justify-center">search</mat-icon>
                    <input matInput onfocus="this.select()" aria-label="organisation" [matAutocomplete]="auto" #organisation
                      name="organisation" formControlName="organisation" i18n-placeholder placeholder="Search organisation" i18n-aria-label
                      aria-label="Type here" >
                    <span matSuffix class="ws-mat-accent-text margin-xs cursor-pointer" (click)="searchOrgs(organisation.value)" >Search</span>
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="orgClicked($event)"  
                      autoActiveFirstOption="true" [displayWith]="displayFnOrg">
                      <ng-container *ngIf="searching">
                        <mat-option [value] = "" class="custom">
                          <div  class="p-4 w-full flex items-center justify-center">
                            <mat-spinner [diameter]="30"></mat-spinner>
                          </div>
                        </mat-option>
                      </ng-container>
                      <ng-container *ngIf="(filteredOrgList || filteredOrgList?.length > 0 ) && resultFetched">
                        <mat-option class=" custom bordered" *ngFor="let organisation of filteredOrgList " [value]="organisation">
                          <ng-container [ngTemplateOutlet]="autocompleteCard" [ngTemplateOutletContext]="{organisation: organisation}">
                          </ng-container>
                        </mat-option>
                      </ng-container>
                      <mat-option  class="custom bordered" *ngIf="(!filteredOrgList || !filteredOrgList?.length) && resultFetched" [value]="">
                        <ng-container [ngTemplateOutlet]="noResult" [ngTemplateOutletContext]="{type: 'Organisation'}">
                        </ng-container>
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                <!-- </ng-container> -->
                <ng-container *ngIf="hideOrg">
                  <div class="orgBox margin-top-s px-4 py-3 relative">
                    <div class="flex">
                      <h3 class="mat-h2 margin-remove inline-block  flex-1">
                        {{heirarchyObject?.orgName}}
                      </h3>
                      <mat-icon matPrefix class="flex items-right justify-right cursor-pointer close-rounded" (click)="editOrg()">close</mat-icon>
                    </div>
                    <div class="flex flex-1 items-center flex-wrap text-left mat-body-2">
                      <span *ngIf="heirarchyObject?.l1OrgName">Under &nbsp;</span>
                      <span *ngIf="heirarchyObject?.l1OrgName">{{heirarchyObject?.l1OrgName}}</span>
                      <span *ngIf="heirarchyObject?.l2OrgName"> <mat-icon matPrefix class=" flex items-center justify-center">navigate_next</mat-icon></span>
                      <span *ngIf="heirarchyObject?.l2OrgName" class="flex-1">{{heirarchyObject?.l2OrgName}}</span>
                    </div>
                  </div>
                </ng-container>
                <div class="w-full margin-top-xs">
                  <div class="flex items-center mat-body-2 flex-1">
                    <span class="flex-1 ws-mat-black60-text">Not found yet?</span>
                    <a class="flex-1 ws-mat-accent-text text-right cursor-pointer font-bold" (click)="navigateTo('Organisation')"> Request for help</a>
                  </div>
                </div>
              </div>

              <ng-template #autocompleteCard let-organisation="organisation">
                <div class="px-5 py-3">
                  <div>
                    <h3 class="mat-h3 margin-remove">
                      {{organisation?.orgName}}
                    </h3>
                  </div>
                  <div class="flex flex-1 items-center flex-wrap text-left mat-body-2">
                    <span *ngIf="organisation?.l1OrgName">Under &nbsp;</span>
                    <span *ngIf="organisation?.l1OrgName">{{organisation?.l1OrgName}}</span>
                    <span *ngIf="organisation?.l2OrgName"> <mat-icon matPrefix class=" flex items-center justify-center">navigate_next</mat-icon></span>
                    <span *ngIf="organisation?.l2OrgName" class="flex-1">{{organisation?.l2OrgName}}</span>
                  </div>
                </div>
              </ng-template>
              <ng-template #noResult let-type="type">
                <div class="flex-col text-center items-center justify-center px-6 py-3">
                  <div class="mat-body-2 px-6">We couldn't find any matches for your search. </div>
                  <div class="mat-body-2 padding-top-xs">
                    <a  class="flex-1 ws-mat-accent-text cursor-pointer font-bold" (click)="navigateTo(type)"> Request for help</a>
                  </div>
                </div>
              </ng-template>
              <div class="input-wrapper margin-top-s">
                <div class="flex flex-middle">
                  <mat-checkbox aria-label="I confirm that the above provided information are accurate." id="confirm"
                    [checked]="confirm" (change)="confirmChange()" i18n-aria-label
                    aria-label="I confirm that the above provided information are accurate. checkbox" required>
                    <label class="margin-remove-bottom mat-body-2 ws-mat-black60-text" i18n-aria-label
                      aria-label="I confirm that the above provided information are accurate. checkbox label">
                      I confirm that the above provided information is accurate.
                    </label>
                  </mat-checkbox>
                </div>
              </div>
              <!-- <div>
                <re-captcha formControlName="recaptchaReactive"></re-captcha>
              </div> -->
              <div class="w-full margin-top-l">
                <div class="button_box flex flex-col items-center justify-center">
                  <button mat-flat-button type="submit"
                    class="submitBtn text-white ws-mat-primary-background ws-mat-white-text" (click)="signup()"
                    [disabled]="!registrationForm?.valid || !confirm || disableBtn || !isMobileVerified || !heirarchyObject">
                    SIGN UP
                  </button>
                </div>
              </div>
              <div class="w-full margin-top-l">
                <div class="flex items-center  mat-body-1 flex-1">
                  Already have an account? &nbsp;
                  <a href="/protected/v8/resource" class="ws-mat-accent-text text-center"> Sign in here</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

  </div>
</div>
