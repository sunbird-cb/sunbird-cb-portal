<ng-container *ngIf="courseID else noDataFound">
  <ng-template #enrollFunctionality>
    <ng-container *ngIf="actionBtnStatus !== 'wait' && content?.status !== 'Deleted' && content?.status !== 'Expired'">
      <div [hidden]="isResource && !content?.artifactUrl?.length" class="flex flex-col gap-4 text-center">
        <!-- Course block -->
        <ng-container *ngIf="content?.primaryCategory !== primaryCategory.PROGRAM
                      && content?.primaryCategory !== primaryCategory.CURATED_PROGRAM
                      && content?.primaryCategory !== primaryCategory.STANDALONE_ASSESSMENT &&
                      content?.primaryCategory !== primaryCategory.BLENDED_PROGRAM">
          <ng-container *ngIf="(actionBtnStatus === 'grant' && !(isMobile && content?.isInIntranet) &&
                        !(content?.primaryCategory === primaryCategory.COURSE && content?.children.length === 0 &&
                        !content?.artifactUrl?.length) &&
                        !(content?.primaryCategory === primaryCategory.COURSE && !batchData?.enrolled) &&
                        !(content?.primaryCategory === primaryCategory.RESOURCE && !content?.artifactUrl) &&
                        !(content?.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL)) &&
                        !(content?.primaryCategory === primaryCategory.PROGRAM && currentCourseBatchId)">
            <a *ngIf="showStart.show && !isPostAssessment"
              [routerLink]="(resumeData && !certData) ? resumeDataLink?.url : firstResourceLink?.url"
              [queryParams]="(resumeData && !certData) ? generateQuery('RESUME') : generateQuery('START')"
              class="flex action-button justify-center">
              <ng-container *ngIf="(!content.completionPercentage || content.completionPercentage < 100) && !certData">
                <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                  {{ resumeData ? translateLabels('resume', 'apptochome') : translateLabels('start', 'apptochome') }}
                </ng-container>
              </ng-container>
              <ng-container *ngIf="content.completionPercentage === 100 || certData">
                {{ resumeData ? translateLabels('Start again', 'apptochome') : translateLabels('start', 'apptochome') }}
              </ng-container>
            </a>

            <button *ngIf="isPostAssessment && showTakeAssessment?.post_assessment" [routerLink]="firstResourceLink?.url"
              class="flex action-button justify-center">
              <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>{{ 'apptochome.takeAssessment' | translate }}</ng-container>
            </button>

            <!-- <div
              *ngIf="!isPostAssessment && (!content.completionPercentage || content.completionPercentage < 100) && !certData">
              <ng-container *ngIf="isAcbpClaim">
                <ws-app-karmapoints-panel [btntype]="'ACBP'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container>
              <ng-container *ngIf="!isAcbpClaim && !monthlyCapExceed">
                <ws-app-karmapoints-panel [btntype]="'Resume'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container>
            </div> -->

            <!-- <div *ngIf="!isPostAssessment && (content.completionPercentage === 100 || certData)">
              <div *ngIf="isAcbpCourse && isAcbpClaim && !isClaimed">
                <ws-app-karmapoints-panel [btntype]="'ACBP CLAIM'" [data]="kparray" [btnCategory]="'claim'"
                  (clickClaimKarmaPoints)="onClickOfClaim($event)"></ws-app-karmapoints-panel>
              </div>
              <div *ngIf="!isAcbpCourse && !monthlyCapExceed">
                <ws-app-karmapoints-panel [btntype]="'Start again'" [data]="kparray"></ws-app-karmapoints-panel>
              </div>
              <div *ngIf="!isAcbpCourse && monthlyCapExceed && !isCompletedThisMonth">
                <ws-app-karmapoints-panel [btntype]="'Start again'" [data]="kparray"></ws-app-karmapoints-panel>
              </div>
            </div> -->

            <!-- <div *ngIf="isPostAssessment && showTakeAssessment?.post_assessment">
              <ws-app-karmapoints-panel [btntype]="'Take Assessment'" [data]="kparray"></ws-app-karmapoints-panel>
            </div> -->
          </ng-container>
          <ng-container *ngIf=" (actionBtnStatus === 'grant' && !(isMobile && content?.isInIntranet) &&
                        !( content?.primaryCategory === primaryCategory.COURSE && content?.children.length === 0 && !content?.artifactUrl?.length ) &&
                        !( content?.primaryCategory === primaryCategory.COURSE && batchData?.enrolled ) &&
                        !(content?.primaryCategory === primaryCategory.RESOURCE && !content?.artifactUrl)) &&
                        !(content?.primaryCategory === primaryCategory.PROGRAM) &&
                        !(content?.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL)">
            <ng-container *ngIf="content?.primaryCategory !== primaryCategory.RESOURCE  && !enrollBtnLoading">
              <a class="flex action-button justify-center resume" (click)="handleAutoBatchAssign()">
                <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                  {{ 'apptochome.enroll' | translate }}
                </ng-container>
              </a>
              <!-- <ng-container *ngIf="isAcbpCourse">
                <ws-app-karmapoints-panel [btntype]="'ACBP'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container> -->
              <!-- <ng-container *ngIf="!isAcbpCourse && !monthlyCapExceed && userEnrollmentList && !userEnrollmentList.length">
                <ws-app-karmapoints-panel [btntype]="'Enroll'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container> -->
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- PRogram & mandatory course block -->
        <ng-container
          *ngIf="content?.primaryCategory === primaryCategory.PROGRAM || content?.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL">
          <ng-container *ngIf="(courseCategory?.MODERATED_PROGRAM === contentReadData?.courseCategory) && (contentReadData?.batches && !batchData?.enrolled)">
            <ng-container *ngIf="(content?.primaryCategory !== primaryCategory.RESOURCE)  && !enrollBtnLoading">
              <a class="flex action-button justify-center resume" (click)="handleAutoBatchAssign()">
                <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                  {{'apptochome.enroll' | translate}}
                </ng-container>
              </a>
              <!-- <ng-container *ngIf="isAcbpCourse">
                <ws-app-karmapoints-panel [btntype]="'ACBP'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container>
              <ng-container *ngIf="!isAcbpCourse && !monthlyCapExceed && userEnrollmentList && !userEnrollmentList.length">
               <ws-app-karmapoints-panel [btntype]="'Enroll'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container> -->
            </ng-container>
          </ng-container>
          <ng-container *ngIf="(courseCategory?.MODERATED_PROGRAM === contentReadData?.courseCategory) && !contentReadData?.batches && !batchData?.enrolled && !enrollBtnLoading">
            No Batches
          </ng-container>
          <ng-container *ngIf="courseCategory?.MODERATED_PROGRAM !== contentReadData?.courseCategory">
            <ng-container
              *ngIf="!(content?.primaryCategory === primaryCategory.PROGRAM && currentCourseBatchId) && content?.primaryCategory !== primaryCategory.MANDATORY_COURSE_GOAL">
              <span class="font-bold shadow-lg text-info-div" i18n>{{ 'apptochome.youAreNotInvited' | translate }}</span>
            </ng-container>
            <ng-container *ngIf="!isBatchInProgress && !!currentCourseBatchId && getStartDate === 'NA'">
              <span class="font-bold shadow-lg text-info-div" i18n>{{ 'apptochome.noActiveBatches' | translate }}</span>
            </ng-container>
            <ng-container *ngIf="!isBatchInProgress && currentCourseBatchId && getStartDate !== 'NA'">
              <span class="font-bold shadow-lg text-info-div" i18n>{{ 'apptochome.batchWillStart' | translate }} {{getStartDate}}!</span>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="isBatchInProgress &&
                        ( actionBtnStatus === 'grant' &&
                          !(isMobile && content?.isInIntranet) &&
                          (content?.primaryCategory === primaryCategory.PROGRAM && currentCourseBatchId) ||
                          (content?.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL && currentCourseBatchId)
                        )">
            <a *ngIf="showStart.show && !isPostAssessment"
              [routerLink]="resumeData ? resumeDataLink?.url : firstResourceLink?.url"
              [queryParams]="resumeData ? generateQuery('RESUME') : generateQuery('START')"
              class="flex action-button justify-center resume">
              <ng-container *ngIf="!content.completionPercentage || content.completionPercentage < 100">
                <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                  {{ resumeData && (content.completionPercentage < 100 && content.completionPercentage> 0) ? translateLabels('resume', 'apptochome') :
                    translateLabels('start', 'apptochome') }}
                </ng-container>
              </ng-container>
              <ng-container *ngIf="content.completionPercentage === 100">
                {{ resumeData || content.completionPercentage === 100 ? "Start again" : "Start" }}
              </ng-container>
            </a>
            <a *ngIf="isPostAssessment && showTakeAssessment?.post_assessment" [routerLink]="firstResourceLink?.url"
              class="flex action-button justify-center resume">
              <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>{{ 'apptochome.takeAssessment' | translate }}</ng-container>
            </a>
            <!-- <div *ngIf="!isPostAssessment && (!content.completionPercentage || content.completionPercentage < 100)">
              <ng-container *ngIf="isAcbpClaim">
                <ws-app-karmapoints-panel [btntype]="'ACBP'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container>
              <ng-container *ngIf="!isAcbpClaim && !monthlyCapExceed">
                <ws-app-karmapoints-panel [btntype]="'Resume'" [data]="kparray"></ws-app-karmapoints-panel>
              </ng-container>
            </div> -->
            <!-- <div *ngIf="!isPostAssessment && (content.completionPercentage === 100)">
              <div *ngIf="isAcbpCourse && isAcbpClaim && !isClaimed">
                <ws-app-karmapoints-panel [btntype]="'ACBP CLAIM'" [condition]="{isPostAssessment: isPostAssessment, content: content, isAcbpCourse: isAcbpCourse, isClaimed: isClaimed, monthlyCapExceed: monthlyCapExceed, isCompletedThisMonth: isCompletedThisMonth, showTakeAssessment: showTakeAssessment, userEnrollmentList: userEnrollmentList, isCompletedThisMonth: isCompletedThisMonth, resumeData: resumeData, userRating: userRating}" [data]="kparray" [btnCategory]="'claim'"
                  (clickClaimKarmaPoints)="onClickOfClaim($event)"></ws-app-karmapoints-panel>
              </div>
              <div *ngIf="!isAcbpCourse && !monthlyCapExceed">
                <ws-app-karmapoints-panel [btntype]="'Start again'" [data]="kparray"></ws-app-karmapoints-panel>
              </div>
              <div *ngIf="!isAcbpCourse && monthlyCapExceed && !isCompletedThisMonth">
                <ws-app-karmapoints-panel [btntype]="'Start again'" [data]="kparray"></ws-app-karmapoints-panel>
              </div>
            </div>
            <div *ngIf="isPostAssessment && showTakeAssessment?.post_assessment">
              <ws-app-karmapoints-panel [btntype]="'Take Assessment'" [data]="kparray"></ws-app-karmapoints-panel>
            </div> -->
          </ng-container>
        </ng-container>

        <ng-container
          *ngIf="isBatchInProgress && (content?.primaryCategory === primaryCategory.CURATED_PROGRAM && batchData?.enrolled)">
          <a *ngIf="showStart.show && !isPostAssessment"
            [routerLink]="resumeData ? resumeDataLink?.url : firstResourceLink?.url"
            [queryParams]="resumeData ? generateQuery('RESUME') : generateQuery('START')"
            class="flex action-button justify-center resume">
            <ng-container *ngIf="!content.completionPercentage || content.completionPercentage < 100">
              <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                {{ resumeData && (content.completionPercentage < 100 && content.completionPercentage> 0) ? translateLabels('resume', 'apptochome') :
                  translateLabels('start', 'apptochome') }}
              </ng-container>
            </ng-container>
            <ng-container *ngIf="content.completionPercentage === 100">
              {{ resumeData || content.completionPercentage === 100 ? translateLabels('Start again', 'apptochome') : translateLabels('start', 'apptochome') }}
            </ng-container>
          </a>
        </ng-container>

        <ng-container *ngIf="enrollBtnLoading">
          <ws-widget-skeleton-loader [width]="'100%'" [height]="'36px'"
            [bindingClass]="'flex rounded h-8'"></ws-widget-skeleton-loader>
        </ng-container>

        <!-- Curated program block -->
        <ng-container
          *ngIf="content?.primaryCategory === primaryCategory.CURATED_PROGRAM && !batchData?.enrolled && !enrollBtnLoading">
          <a class="flex action-button justify-center resume" (click)="handleAutoBatchAssign()">
            <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
              {{ 'apptochome.enroll' | translate }}
            </ng-container>
          </a>
        </ng-container>
        <!-- STANDALONE_ASSESSMENT black -->
        <ng-container
          *ngIf="content?.primaryCategory === primaryCategory.STANDALONE_ASSESSMENT && !batchData?.enrolled && !enrollBtnLoading">
          <a class="flex action-button justify-center resume" (click)="handleAutoBatchAssign()">
            <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
              {{ 'apptochome.enroll' | translate }}
            </ng-container>
          </a>
        </ng-container>
        <!-- STANDALONE_ASSESSMENT enrolled black -->
        <ng-container *ngIf="content?.primaryCategory === primaryCategory.STANDALONE_ASSESSMENT && batchData?.enrolled">
          <a class="flex action-button justify-center resume" [routerLink]="firstResourceLink?.url"
            [queryParams]="(resumeData && !certData) ? generateQuery('RESUME') : generateQuery('START')">
            {{ 'apptochome.takeTest' | translate }}
          </a>
        </ng-container>
        <!-- BLENDED_PROGRAM block -->
        <ng-container *ngIf="content?.primaryCategory === primaryCategory.BLENDED_PROGRAM">
          <ng-container *ngIf="batchData?.workFlow?.wfInitiated &&
                        !(batchData?.workFlow?.wfItem?.currentStatus === WFBlendedProgramStatus.APPROVED || batchData?.workFlow?.wfItem?.currentStatus === WFBlendedProgramStatus.REJECTED || batchData?.workFlow?.wfItem?.currentStatus === WFBlendedProgramStatus.WITHDRAWN)">
            <div class="ws-mat-accent-text ws-mat-accent-light-bg flex items-center justify-center statusMsg">
              <p class="margin-remove-bottom font-bold">
                {{ 'apptochome.requestUnderReview' | translate }}
              </p>
            </div>
          </ng-container>
          <ng-container>
            <a
              *ngIf="showStart.show && batchData?.workFlow?.wfInitiated && batchData?.workFlow?.wfItem?.currentStatus === WFBlendedProgramStatus.APPROVED"
              [routerLink]="isBatchInProgress? (resumeData && !certData) ? resumeDataLink?.url : firstResourceLink?.url : '' "
              [queryParams]="isBatchInProgress ? (resumeData && !certData) ? generateQuery('RESUME') : generateQuery('START') : '' "
              class="flex action-button justify-center resume" [ngClass]="{'disable-start-btn': !isBatchInProgress}">
              <ng-container *ngIf="(!content.completionPercentage || content.completionPercentage < 100) && !certData">
                <ng-container *ngIf="!forPreview || isInIFrame; else authView" i18n>
                  {{ resumeData && (content.completionPercentage < 100 && content.completionPercentage> 0) ? translateLabels('resume', 'apptochome') :
                    translateLabels('start', 'apptochome') }}
                </ng-container>
              </ng-container>
              <ng-container *ngIf="content.completionPercentage === 100 || certData">
                {{ resumeData || content.completionPercentage === 100 ? translateLabels('Start again', 'apptochome') : translateLabels('start', 'apptochome') }}
              </ng-container>
            </a>
          </ng-container>
        </ng-container>

        <ng-container *ngIf="actionBtnStatus == 'reject' && content?.registrationUrl">
          <a [href]="content?.registrationUrl" target="_blank" class="flex action-button justify-center" i18n>{{ 'apptochome.register' | translate }}</a>
        </ng-container>
      </div>
    </ng-container>

    <div class="hideAbove1200">
      <ws-app-toc-banner role="banner" [banners]="banners" [forPreview]="forPreview" [content]="content"
        [userEnrollmentList]="userEnrollmentList" (withdrawOrEnroll)="withdrawOrEnroll($event)" [analytics]="analytics"
        [resumeData]="resumeData" [batchData]="batchData" [contentReadData]="contentReadData">
      </ws-app-toc-banner>
    </div>
  </ng-template>

  <ng-template #progressFunctionality>
    <div class="flex flex-row gap-4">
      <div class="flex-1">
        <ng-container *ngIf="content?.completionStatus <= 2 && isBatchInProgress">
          <div class="flex flex-col gap-2">
            <div class="flex flex-row gap-4 text-sm">
              <div class="flex-1 text-xs">{{ 'apptocsinglepage.overallProgress' | translate }}</div>
              <div class="text-xs" *ngIf="content?.completionPercentage > 0"> {{ content?.completionPercentage }} %</div>
            </div>
            <ws-widget-content-progress *ngIf="content?.identifier" [forPreview]="forPreview"
              [contentId]="content?.identifier" [progress]="content?.completionPercentage" [progressType]="'percentage'"
              [customClassName]="'content-progress'" >
            </ws-widget-content-progress>
          </div>
        </ng-container>
      </div>

      <ng-container *ngIf="resumeData">
        <button mat-stroked-button color="accent" type="button" class="rate-button" (click)="openFeedbackDialog(content)">
          <mat-icon>star_purple500</mat-icon>
          <ng-container *ngIf="!userRating">
            <div>{{ 'apptocsinglepage.rateNow' | translate }}</div>
          </ng-container>
          <ng-container *ngIf="userRating">
            <div>{{ 'apptocsinglepage.editRating' | translate }}</div>
          </ng-container>
        </button>
      </ng-container>
    </div>
  </ng-template>

  <div class="toc-banner">
    <div class="flex flex-row gap-6 fixed-width">
      <div class="banner-details toc-content" #bannerDetails>
        <div class="flex flex-col gap-4">
          <div class="flex items-center justify-between gap-4">
            <ng-container *ngIf="skeletonLoader">
              <ws-widget-skeleton-loader [width]="'132px'" [height]="'32px'"
                [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
              <ws-widget-skeleton-loader [width]="'140px'" [height]="'24px'" [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
            </ng-container>

            <ng-container *ngIf="!skeletonLoader">
              <div class="flex flex-row gap-2">
                <div class="flex flex-row tag-div rounded-2xl gap-1 items-center p-2">
                  <mat-icon class="ws-mat-orange-text">video_library</mat-icon>
                  <div class="text-xs font-bold text-white leading-3">{{ translateLabel(content?.courseCategory, 'searchfilters') }}</div>
                </div>
                <div class="flex items-center" *ngIf="cbPlanEndDate">
                  <div class="flex items-center due-tag text-xs leading-3">
                    {{ 'common.dueBy' | translate }} - &nbsp;<span class="font-bold">{{ cbPlanEndDate | date: 'd MMM, y'}}</span>
                  </div>
                </div>
              </div>
            </ng-container>

            <div class="flex items-center text-white mob-share" *ngIf="canShare">
              <mat-icon (click)="onClickOfShare()">share</mat-icon>
            </div>
          </div>
          <div class="flex flex-col gap-2">
            <ng-container *ngIf="skeletonLoader">
              <ws-widget-skeleton-loader [width]="'90%'" [height]="'32px'"
                [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
              <ws-widget-skeleton-loader [width]="'70%'" [height]="'32px'"
                [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
            </ng-container>
            <ng-container *ngIf="!skeletonLoader">
              <div class="banner-text text-base sm:text-4xl leading-6 sm:leading-10 font-bold">{{ handleCapitalize(content?.name) }}</div>
              <div class="text-sm sm:text-base source-text font-semibold break-words" #contentSource [ngClass]="{'sourceEllipsis': sourceEllipsis}">{{ 'cardcontentv2.by' | translate }} {{ content?.source }}</div>
            </ng-container>
          </div>
          <div class="flex gap-4 items-center ">
            <ng-container *ngIf="skeletonLoader">
              <ws-widget-skeleton-loader [width]="'120px'" [height]="'40px'"
                [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
              <ws-widget-skeleton-loader [width]="'88px'" [height]="'24px'"
                [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
            </ng-container>
            <ng-container *ngIf="!skeletonLoader">
              <div class="flex flex-row rating-chip py-2 px-3 items-center cursor-pointer" (click)="handleNavigateToReviews()" >
                <div class="flex flex-row gap-1 items-center">
                  <mat-icon>grade</mat-icon>
                  <div class="text-white text-sm leading-4">{{ content?.averageRating }}</div>
                </div>
                <div class="separator"></div>
                <div class="text-white text-sm leading-4">{{ content?.totalRating | pipeCountTransform }}</div>
              </div>
              <div class="flex items-center" *ngIf="content?.additionalTags?.length">
                <div class="most-enrolled-chip text-xs leading-3">
                  <span *ngIf="content?.additionalTags?.includes('mostTrending')">{{ 'cardcontentv2.mostTrending' | translate }}</span>
                  <span *ngIf="content?.additionalTags?.includes('mostEnrolled')">{{ 'cardcontentv2.mostEnrolled' | translate }}</span>
                </div>
              </div>
            </ng-container>
          </div>
          <ng-container *ngIf="skeletonLoader">
            <ws-widget-skeleton-loader [width]="'180px'" [height]="'20px'"
              [bindingClass]="'rounded blue-2-loader'"></ws-widget-skeleton-loader>
          </ng-container>
          <ng-container *ngIf="!skeletonLoader && content?.sYS_INTERNAL_LAST_UPDATED_ON">
            <div class="text-xs leading-4 source-text">({{ 'apptoc.lastUpdatedOn' | translate }} {{ content?.sYS_INTERNAL_LAST_UPDATED_ON | date: 'MMM d, y' }})</div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>

  <div class="flex flex-row gap-6 fixed-width">
    <div class="toc-content">
      <div class="pb-4 lg:py-4">

        <!-- Overall progress functionality -->
        <div class="mobile-progress">
          <ng-container [ngTemplateOutlet]="progressFunctionality"></ng-container>
        </div>
        <!-- Overall progress functionality -->

        <ws-widget-content-toc [content]="content" [pathSet]="pathSet" [tocStructure]="tocStructure" 
        [forPreview]="false" [resumeData]="resumeData" [batchData]="selectedBatchData" [skeletonLoader]="skeletonLoader" 
        [changeTab]="changeTab" [hierarchyMapData]="tocSvc?.hashmap" [selectedBatchData]="selectedBatchData" [condition]="{isPostAssessment: isPostAssessment, content: content, isAcbpCourse: isAcbpCourse, isClaimed: isClaimed, monthlyCapExceed: monthlyCapExceed, isCompletedThisMonth: isCompletedThisMonth, showTakeAssessment: showTakeAssessment, userEnrollmentList: userEnrollmentList, resumeData: resumeData, userRating: userRating, enrollBtnLoading: enrollBtnLoading, primaryCategory: primaryCategory}" [kparray]="kparray"></ws-widget-content-toc>
      </div>
    </div>

    <div class="right-container">
      <div class="right-content" #rightContainer>
        <ng-container *ngIf="skeletonLoader">
          <ws-widget-skeleton-loader [width]="'384px'" [height]="'224px'"
            [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
        </ng-container>
        <ng-container *ngIf="!skeletonLoader">
          <div class="flex flex-col image-div" [ngStyle]="{
        'background-image': 'url(' + content?.posterImage + ')', 'background-repeat': 'no-repeat', 'background-size': 'cover'}" [ngClass]="{'image-backdrop': scrolled}">
            <div class="flex flex-col justify-between text-container">
              <div class="flex items-center gap-4 justify-between" [ngClass]="{'justify-between': scrolled, 'justify-end': !scrolled}">
                <div class="flex flex-row tag-div rounded-2xl gap-1 items-center p-2" *ngIf="scrolled">
                  <mat-icon class="ws-mat-orange-text">video_library</mat-icon>
                  <div class="text-xs font-bold text-white leading-3">{{ translateLabel(content?.primaryCategory, 'searchfilters') }}</div>
                </div>
                <div (click)="onClickOfShare()" class="flex flex-row items-center justify-end gap-2 share-tag" *ngIf="canShare">
                  <mat-icon>share</mat-icon>
                  <div>{{ 'apptocsinglepage.share' | translate }}</div>
                </div>
              </div>
              <div class="flex flex-col gap-1" *ngIf="scrolled">
                <div class="text-xl leading-6 text-white font-bold">{{ handleCapitalize(content?.name) }}
                </div>
                <div class="text-sm source-text font-semibold break-words" #contentSource [ngClass]="{'sourceEllipsis': sourceEllipsis}">{{ 'cardcontentv2.by' | translate }} {{ content?.source }}</div>
              </div>
            </div>
          </div>
        </ng-container>

        <div class="flex flex-col gap-4 p-5 border-bottom">
          <div class="flex flex-col gap-4" *ngIf="content && content?.primaryCategory === primaryCategory.BLENDED_PROGRAM">
            <div class="flex flex-row gap-3 justify-around">
              <div class="batch-info">
                <div class="font-base font-bold">{{ selectedBatchData?.content[0]?.batchAttributes?.currentBatchSize || '0' }}</div>
                <div class="batch-label">{{ 'apptoc.batchSize' | translate }}</div>
              </div>
              <div class="batch-info">
                <div class="font-base font-bold">{{ selectedBatchData?.userCount?.totalApplied || '0' }}</div>
                <div class="batch-label">{{ 'apptoc.totalApplied' | translate }}</div>
              </div>
              <div class="batch-info">
                <div class="font-base font-bold">{{ selectedBatchData?.userCount?.enrolled || '0' }}</div>
                <div class="batch-label">{{ 'apptoc.totalEnrolled' | translate }}</div>
              </div>
            </div>

            <ws-app-toc-banner role="banner" [banners]="banners" [forPreview]="forPreview" [content]="content"
              [userEnrollmentList]="userEnrollmentList" (withdrawOrEnroll)="withdrawOrEnroll($event)" [analytics]="analytics"
              [resumeData]="resumeData" [batchData]="batchData" [contentReadData]="contentReadData">
            </ws-app-toc-banner>
          </div>

          <ng-container *ngIf="skeletonLoader">
            <ws-widget-skeleton-loader [width]="'336px'" [height]="'40px'"
              [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            <ws-widget-skeleton-loader [width]="'336px'" [height]="'68px'"
              [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
          </ng-container>

          <ng-container *ngIf="!skeletonLoader">
            <div class="flex flex-col gap-4">
              <div class="flex flex-row items-center gap-2 info-div" *ngIf="content?.isInIntranet && showIntranetMsg">
                <mat-icon>info</mat-icon>
                <ng-container i18n>{{ 'apptochome.viewedInIntranet' | translate }}</ng-container>
              </div>
              <div class="flex flex-row items-center gap-2 info-div" *ngIf="showInstructorLedMsg">
                <mat-icon>info</mat-icon>&nbsp;
                <ng-container i18n>{{ 'apptochome.notAvailableOnline' | translate }}</ng-container>
              </div>
              <div class="flex flex-row items-center gap-2 info-div" *ngIf="showStart.msg === 'youtubeForbidden'">
                <mat-icon>info</mat-icon>&nbsp;
                <ng-container i18n>{{ 'apptochome.youtubeContentBlocked' | translate }}</ng-container>
              </div>
              <div *ngIf="showBtn">
                <a href="{{ cscmsUrl }}" target="_blank" class="flex action-button justify-center">
                  {{ 'apptochome.applyForPhysicalTraining' | translate }}</a>
              </div>
            </div>

            <!-- Overall progress functionality -->
            <ng-container [ngTemplateOutlet]="progressFunctionality"></ng-container>
            <!-- Overall progress functionality -->

            <!-- <div *ngIf="resumeData && !userRating"> -->
              <!-- <ws-app-karmapoints-panel [btntype]="'Rate this course'" [data]="kparray"
                [pCategory]="content?.primaryCategory"></ws-app-karmapoints-panel> -->
            <!-- </div> -->

            <!-- <div *ngIf="resumeData && userRating">
              <ws-app-karmapoints-panel [btntype]="'Edit rating'" [data]="kparray"
                [pCategory]="content?.primaryCategory"></ws-app-karmapoints-panel>
            </div> -->

            <ng-container [ngTemplateOutlet]="enrollFunctionality"></ng-container>
            <div class="karma-points-div">
              <ws-widget-karma-points [btntype]="" [data]="kparray" [btnCategory]="" (clickClaimKarmaPoints)="onClickOfClaim($event)"
                [condition]="{isPostAssessment: isPostAssessment, content: content, isAcbpCourse: isAcbpCourse, isClaimed: isClaimed, monthlyCapExceed: monthlyCapExceed, isCompletedThisMonth: isCompletedThisMonth, showTakeAssessment: showTakeAssessment, userEnrollmentList: userEnrollmentList, isCompletedThisMonth: isCompletedThisMonth, resumeData: resumeData, userRating: userRating, enrollBtnLoading: enrollBtnLoading, primaryCategory: primaryCategory, currentCourseBatchId: currentCourseBatchId}"></ws-widget-karma-points>
            </div>
          </ng-container>

          <ng-container *ngIf="skeletonLoader">
            <div class="flex flex-wrap gap-6">
              <div class="flex flex-col items-center gap-2 kpi-loader-div">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'48px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
              </div>
              <div class="flex flex-col items-center gap-2 kpi-loader-div">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'48px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
              </div>
              <div class="flex flex-col items-center gap-2 kpi-loader-div">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'48px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
              </div>
              <div class="flex flex-col items-center gap-2 kpi-loader-div">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'48px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
              </div>
              <div class="flex flex-col items-center gap-2 kpi-loader-div">
                <ws-widget-skeleton-loader [width]="'28px'" [height]="'28px'"
                  [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'40px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'48px'" [height]="'8px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="!skeletonLoader">
            <ws-widget-toc-kpi-values [content]="content" [tocStructure]="tocStructure" [showInstructorLedMsg]="showInstructorLedMsg"></ws-widget-toc-kpi-values>
          </ng-container>
        </div>

        <div class="flex flex-col gap-8 p-5">
          <ng-container *ngIf="skeletonLoader">
            <div class="flex flex-col gap-4" *ngFor="let i of [1, 2]">
              <ws-widget-skeleton-loader [width]="'72px'" [height]="'20px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>

              <div class="flex flex-row items-center gap-3">
                <ws-widget-skeleton-loader [width]="'36px'" [height]="'36px'" [bindingClass]="'rounded-full'"></ws-widget-skeleton-loader>
                <div class="flex flex-col gap-2">
                  <ws-widget-skeleton-loader [width]="'124px'" [height]="'20px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                  <ws-widget-skeleton-loader [width]="'124px'" [height]="'12px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                </div>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="!skeletonLoader">
            <div class="flex flex-col gap-3" *ngIf="handleParseJsonData(content?.creatorDetails)?.length">
              <div class="text-base font-bold">{{ 'apptocsinglepage.authors' | translate }}</div>
              <div class="flex flex-row gap-4 items-center" *ngFor="let author of handleParseJsonData(content?.creatorDetails)">
                <div class="flex items-center justify-center">
                  <ws-widget-avatar-photo [randomColor]="true" [datalen]="1" [size]="'round-m'" [photoUrl]="author?.photo || ''"
                    [name]="author?.name">
                  </ws-widget-avatar-photo>
                </div>
                <div class="flex flex-col gap-1 justify-center">
                  <div class="font-bold">{{ handleCapitalize(author?.name, 'name') }}</div>
                  <div class="text-xs leading-3">{{ 'apptocsinglepage.author' | translate }}</div>
                </div>
              </div>
            </div>
            <div class="flex flex-col gap-3" *ngIf="handleParseJsonData(content?.creatorContacts)?.length">
              <div class="text-base font-bold">{{ 'apptocsinglepage.curators' | translate }}</div>
              <div class="flex flex-row gap-4" *ngFor="let creator of handleParseJsonData(content?.creatorContacts)">
                <div class="flex items-center justify-center">
                  <ws-widget-avatar-photo [randomColor]="true" [datalen]="1" [size]="'round-m'" [photoUrl]="author?.photo || ''"
                    [name]="creator?.name">
                  </ws-widget-avatar-photo>
                </div>
                <div class="flex flex-col gap-1 justify-center">
                  <div class="font-bold">{{ handleCapitalize(creator?.name, 'name') }}</div>
                  <div class="text-xs leading-3">{{ 'apptocsinglepage.curator' | translate }}</div>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>

  <div class="mobile-enroll-div">
    <ng-container [ngTemplateOutlet]="enrollFunctionality"></ng-container>
  </div>

  <ws-app-share-toc *ngIf="enableShare" [rootOrgId]="rootOrgId" [content]="content" (resetEnableShare)="resetEnableShare($event)"></ws-app-share-toc>
</ng-container>
<ng-template #noDataFound>
  <div class="error-not-found flex flex-wrapped margin-left-m margin-top-xl margin-right-m flex-col justify-center align-items-center text-center">
    <div class="error-logo">
      <div class="error-message ws-mat-primary-text font-weight-bold" i18n>
        The page you requested cannot be found
      </div>
    </div>
    <!-- <div class="error-support">
      <div class="support-message" i18n>We have updated our web site and many URLs have changed.</div>
      <div class="support-message" i18n>You might want to:</div>
    </div> -->
  </div>

</ng-template>
